mapscripts ZoneSanctuary_MapScripts {
	MAP_SCRIPT_ON_FRAME_TABLE [
		VAR_ZONE, 0: Sanctuary_EventScript_GameIntro
		VAR_GENERIC, 1: Sanctuary_EventScript_EnterSanctuary
	]
}

script ZoneSanctuary_EventScript_Colress {
	lock
	faceplayer
	setspeaker(SP_NAME_COLRESS)
	message(format("Greetings, {PLAYER}.\pWhat can I help you with?"))
	waitmessage
	call(EventScript_Colress_Menu)
	call(EventScript_WhenUReadyDialogue)
	release
}

script EventScript_Colress_Menu {
	while {
		dynmultipush("Next Zone", 0)
		dynmultipush("Difficulty", 5)
		if (flag(FLAG_SETTINGS_NUZLOCKE)) {
			dynmultipush("Nuzlocke", 2)
		}
		dynmultipush("Game Version", 1)
		dynmultipush("Exit", 4)
		dynmultistack(0, 0, FALSE, 5, FALSE, 0, DYN_MULTICHOICE_CB_NONE)
		switch (var(VAR_RESULT)) {
			case 0:
				call(EventScript_NextZone)
			case 5:
				call(EventScript_Difficulty)
			case 1:
				call(EventScript_Version)
			case 2:
				call(EventScript_Nuzlocke)
			case 4:
			case MULTI_B_PRESSED:
				return
		}
		setspeaker(SP_NAME_COLRESS)
		message(format("Anything else I can help with?"))
		waitmessage
	}
}

script EventScript_Difficulty {
	while {
		call(EventScript_Difficulty_SetToMessage)
		dynmultipush("Difficulty Info", 0)
		dynmultipush("Switch Difficulty", 1)
		dynmultipush("Back", 2)
		dynmultistack(0, 0, FALSE, 3, FALSE, 0, DYN_MULTICHOICE_CB_NONE)
		switch (var(VAR_RESULT)) {
			case 0:
				call(EventScript_Difficulty_Info)
			case 1:
				call(EventScript_Difficulty_Switch)
			case 2:
			case MULTI_B_PRESSED:
				return
		}
	}
}

script EventScript_Difficulty_SetToMessage {
	setspeaker(SP_NAME_COLRESS)
	switch (var(VAR_DIFFICULTY)) {
		case DIFFICULTY_EASY:
			message(format("The difficulty is currently set to {COLOR RED}Easy{COLOR DARK_GRAY}."))
			waitmessage
		case DIFFICULTY_NORMAL:
			message(format("The difficulty is currently set to {COLOR RED}Normal{COLOR DARK_GRAY}."))
			waitmessage
		case DIFFICULTY_HARD:
			message(format("The difficulty is currently set to {COLOR RED}Hard{COLOR DARK_GRAY}."))
			waitmessage
		case DIFFICULTY_BRUTAL:
			message(format("The difficulty is currently set to {COLOR RED}Brutal{COLOR DARK_GRAY}."))
			waitmessage
	}
}

script EventScript_Difficulty_Switch {
	while {
		setspeaker(SP_NAME_COLRESS)
		message(format("Which difficulty would you like to switch to?"))
		waitmessage
		switch (var(VAR_DIFFICULTY)) {
			case DIFFICULTY_EASY:
				dynmultipush("{COLOR RED}Easy", 0)
				dynmultipush("Normal", 1)
				dynmultipush("Hard", 2)
				dynmultipush("Brutal", 3)
			case DIFFICULTY_NORMAL:
				dynmultipush("Easy", 0)
				dynmultipush("{COLOR RED}Normal", 1)
				dynmultipush("Hard", 2)
				dynmultipush("Brutal", 3)
			case DIFFICULTY_HARD:
				dynmultipush("Easy", 0)
				dynmultipush("Normal", 1)
				dynmultipush("{COLOR RED}Hard", 2)
				dynmultipush("Brutal", 3)
			case DIFFICULTY_BRUTAL:
				dynmultipush("Easy", 0)
				dynmultipush("Normal", 1)
				dynmultipush("Hard", 2)
				dynmultipush("{COLOR RED}Brutal", 3)
		}
		dynmultipush("Back", 4)
		dynmultistack(0, 0, FALSE, 5, FALSE, 0, DYN_MULTICHOICE_CB_NONE)
		switch (var(VAR_RESULT)) {
			case 0:
				if (var(VAR_DIFFICULTY) == DIFFICULTY_EASY) {
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("The difficulty is already set to {COLOR RED}Easy{COLOR DARK_GRAY}."))
				} else {
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("Change the difficulty to {COLOR RED}Easy{COLOR DARK_GRAY}?"), MSGBOX_YESNO)
					if (var(VAR_RESULT) == YES) {
						setvar(VAR_DIFFICULTY, DIFFICULTY_EASY)
						setspeaker(SP_NAME_COLRESS)
						msgbox(format("The difficulty has been changed to {COLOR RED}Easy{COLOR DARK_GRAY}."))
						if ((flag(FLAG_TRUE_BRUTAL) == TRUE) && (var(VAR_ZONE_2_STATE) == 1)) {
							additem(ITEM_TM_PROTECT)
						}
						clearflag(FLAG_TRUE_BRUTAL)
						return
					}
				}
			case 1:
				if (var(VAR_DIFFICULTY) == DIFFICULTY_NORMAL) {
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("The difficulty is already set to {COLOR RED}Normal{COLOR DARK_GRAY}."))
				} else {
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("Change the difficulty to {COLOR RED}Normal{COLOR DARK_GRAY}?"), MSGBOX_YESNO)
					if (var(VAR_RESULT) == YES) {
						setvar(VAR_DIFFICULTY, DIFFICULTY_NORMAL)
						setspeaker(SP_NAME_COLRESS)
						msgbox(format("The difficulty has been changed to {COLOR RED}Normal{COLOR DARK_GRAY}."))
						if ((flag(FLAG_TRUE_BRUTAL) == TRUE) && (var(VAR_ZONE_2_STATE) == 1)) {
							additem(ITEM_TM_PROTECT)
						}
						clearflag(FLAG_TRUE_BRUTAL)
						return
					}
				}
			case 2:
				if (var(VAR_DIFFICULTY) == DIFFICULTY_HARD) {
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("The difficulty is already set to {COLOR RED}Hard{COLOR DARK_GRAY}."))
				} else {
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("Change the difficulty to {COLOR RED}Hard{COLOR DARK_GRAY}?"), MSGBOX_YESNO)
					if (var(VAR_RESULT) == YES) {
						setvar(VAR_DIFFICULTY, DIFFICULTY_HARD)
						setspeaker(SP_NAME_COLRESS)
						msgbox(format("The difficulty has been changed to {COLOR RED}Hard{COLOR DARK_GRAY}."))
						if ((flag(FLAG_TRUE_BRUTAL) == TRUE) && (var(VAR_ZONE_2_STATE) == 1)) {
							additem(ITEM_TM_PROTECT)
						}
						clearflag(FLAG_TRUE_BRUTAL)
						return
					}
				}
			case 3:
				if (var(VAR_DIFFICULTY) == DIFFICULTY_BRUTAL) {
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("The difficulty is already set to {COLOR RED}Brutal{COLOR DARK_GRAY}."))
				} else {
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("Change the difficulty to {COLOR RED}Brutal{COLOR DARK_GRAY}?"), MSGBOX_YESNO)
					if (var(VAR_RESULT) == YES) {
						setvar(VAR_DIFFICULTY, DIFFICULTY_BRUTAL)
						setspeaker(SP_NAME_COLRESS)
						msgbox(format("The difficulty has been changed to {COLOR RED}Brutal{COLOR DARK_GRAY}."))
						return
					}
				}
			case 4:
			case MULTI_B_PRESSED:
				return
		}
	}
}

// Removed for now, as FLAG_SETTINGS_FULL_INFO has been removed.
// script EventScript_FullInfo {
// 	if (flag(FLAG_SETTINGS_FULL_INFO)) {
// 		msgbox(format("You currently have the Full Info option on. Would you like to turn it off?"), MSGBOX_YESNO)
// 		if (var(VAR_RESULT) == YES) {
// 			clearflag(FLAG_SETTINGS_FULL_INFO)
// 			msgbox(format("Full Info turned off."))
// 		}
// 	} else {
// 		msgbox(format("You currently have the Full Info option off. Would you like to turn it on?"), MSGBOX_YESNO)
// 		if (var(VAR_RESULT) == YES) {
// 			setflag(FLAG_SETTINGS_FULL_INFO)
// 			msgbox(format("Full Info turned on."))
// 		}
// 	}
// 	return
// }

script EventScript_Version {
	msgbox(format("This is version 2.0.0 of Pokémon Battle Labyrinth.\pMake sure you're playing the most up to date version!"))
	return
}

script EventScript_Nuzlocke {
	setspeaker(SP_NAME_COLRESS)
	msgbox(gText_Colress_NuzlockeExplained)
	if (var(VAR_NUZLOCKE_DEATHS) == 1) {
		msgbox("So far there has been 1 death.")
	} else {
		buffernumberstring(STR_VAR_1, VAR_NUZLOCKE_DEATHS)
		msgbox("So far there have been {STR_VAR_1} deaths.")
	}
	msgbox(format("Would you like to turn off {COLOR RED}Nuzlocke{COLOR DARK_GRAY} mode?"), MSGBOX_YESNO)
	if (var(VAR_RESULT) == YES) {
		msgbox(format("Are you sure you would like to turn off {COLOR RED}Nuzlocke{COLOR DARK_GRAY} mode?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == YES) {
			playse(SE_PC_OFF)
			msgbox("{COLOR RED}Nuzlocke{COLOR DARK_GRAY} mode turned off.")
			waitse
			clearflag(FLAG_SETTINGS_NUZLOCKE)
			clearflag(FLAG_ZONE13C_NUZLOCKE_FOSSIL_RECEIVED)
		}
	}
	return
}

text gText_Colress_NuzlockeExplained {
	format("{COLOR RED}Nuzlocke{COLOR DARK_GRAY} mode completely implements all standard Nuzlocke rules, such as permanent death and capture restrictions.\p"
	"It comes with Species Clause, Shiny Clause, and Gift Clause.\p"
	"In addition, Gift Pokémon are randomized among their options, if any.\p"
	"You also cannot catch encounters through the DexNav.\p"
	"It is not recommended to play Nuzlocke mode unless you are familiar with Nuzlockes already.\p"
	"Nuzlocke mode can only be enabled at the beginning of the game, but can be disabled at any point.")
}

// script EventScript_RespinEncounters {
// 	msgbox(format("Respin encounters?"), MSGBOX_YESNO)
// 	if (var(VAR_RESULT) == YES) {
// 		callnative(RegenerateWildEncounterSeed)
// 	}
// 	return
// }

script EventScript_NextZone {
	if (checkitem(ITEM_SUPER_ROD) == FALSE) {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("It seems you haven't explored the Sanctuary fully yet.\pPerhaps speak to the Fisherman south of here."))
		return
	}
	if (checkitem(ITEM_INFINITE_REPEL) == FALSE) {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("It seems you haven't explored the Sanctuary fully yet.\pPerhaps speak to the Hiker south of the shops."))
		return
	}
	if (checkitem(ITEM_INFINITE_CANDY) == FALSE) {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("It seems you haven't explored the Sanctuary fully yet.\pPerhaps speak to the Expert southwest of the Pokémon Center."))
		return
	}
	if (getpartysize() < 4) {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("You're undergoing quite the challenge by entering the next Zone with that few Pokémon in your party. Proceed anyways?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == NO) {
			return
		}
	}
	if (var(VAR_FARM_STOCK) > 0) {
		switch (var(VAR_ZONE)) {
			case 5:
			case 10:
			case 15:
			case 20:
			case 25:
			case 30:
			case 35:
			case 40:
			case 45:
			case 50:
				setspeaker(SP_NAME_COLRESS)
				msgbox(format("You still have items to purchase at the Farmer's Stand, which is about to restock. Proceed anyways?"), MSGBOX_YESNO)
				if (var(VAR_RESULT) == NO) {
					return
				}
		}
	}
	switch (var(VAR_ZONE)) {
		default:
			call(EventScript_BufferCurrentZoneName)
			setspeaker(SP_NAME_COLRESS)
			msgbox(format("Are you prepared? You will be entering {COLOR GREEN}{STR_VAR_1}{COLOR DARK_GRAY}."), MSGBOX_YESNO)
			if (var(VAR_RESULT) == NO) {
				return
			}
		case 7:
			msgbox(format("Are you prepared? You will be entering {COLOR GREEN}Zone 7 - Gemini Heights{COLOR DARK_GRAY} and {COLOR GREEN}Zone 8 - Gemini Caves{COLOR DARK_GRAY}."), MSGBOX_YESNO)
			if (var(VAR_RESULT) == NO) {
				return
			}
		case 9:
			msgbox(format("Are you sure you're ready? You will be entering {COLOR GREEN}Zone 9 - Lushbranch Village{COLOR DARK_GRAY}."), MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				call(Sanctuary_EventScript_EnterZone)
				setvar(VAR_LEVEL_CAP, 9)
				setflag(FLAG_HIDE_ZONE9A_BERTHA_WINSTRATE)
				setflag(FLAG_HIDE_ZONE9A_CASSANDRA_WINSTRATE)
				setflag(FLAG_HIDE_ZONE9A_DOMINIC_WINSTRATE)
				setflag(FLAG_HIDE_ZONE9A_ERICA_WINSTRATE)
				setvar(VAR_ZONE_9_STATE, 0)
				warp(MAP_ZONE9A, 255, 41, 22)
				waitstate
				end
			}
		case 10:
			msgbox(format("Are you sure you're ready? You will be entering {COLOR GREEN}Zone 10 - Scornwind Desert{COLOR DARK_GRAY}."), MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				call(Sanctuary_EventScript_EnterZone)
				setvar(VAR_LEVEL_CAP, 10)
				warp(MAP_ZONE10A, 255, 42, 51)
				waitstate
				end
			}
		case 11:
			msgbox(format("Are you sure you're ready? You will be entering {COLOR GREEN}Zone 11 - Duskwither Maze{COLOR DARK_GRAY}."), MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				call(Sanctuary_EventScript_EnterZone)
				setvar(VAR_LEVEL_CAP, 11)
				warp(MAP_ZONE6A, 255, 51, 22)
				waitstate
				end
			}
		case 12:
			msgbox(format("Are you sure you're ready? You will be entering {COLOR GREEN}Zone 12 - Twinstream Plains{COLOR DARK_GRAY}."), MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				call(Sanctuary_EventScript_EnterZone)
				setvar(VAR_LEVEL_CAP, 12)
				warp(MAP_ZONE12A, 255, 9, 16)
				waitstate
				end
			}
		case 13:
			msgbox(format("Are you sure you're ready? You will be entering {COLOR GREEN}Zone 13 - Gemini Heights{COLOR DARK_GRAY} and {COLOR GREEN}Zone 14 - Gemini Caves{COLOR DARK_GRAY}."), MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				call(Sanctuary_EventScript_EnterZone)
				setvar(VAR_LEVEL_CAP, 13)
				warp(MAP_ZONE13A, 255, 18, 10)
				waitstate
				end
			}
	}
	call(EventScript_AskSaveGame)
	copyvar(VAR_LEVEL_CAP, VAR_ZONE)
	special(BufferCurrentLevelCap)
	setspeaker(SP_NAME_NONE)
	msgbox(format("Level Cap increased to {COLOR RED}{STR_VAR_1}{COLOR DARK_GRAY}."))
	setflag(FLAG_IN_NEW_ZONE)
	setspeaker(SP_NAME_COLRESS)
	msgbox(format("Bring out the strength of you and your Pokémon!"), MSGBOX_AUTOCLOSE)
	applymovement(LOCALID_COLRESS, Common_Movement_WalkUp)
	waitmovement(0)
	applymovement(LOCALID_COLRESS, Common_Movement_WalkLeft)
	waitmovement(0)
	applymovement(LOCALID_COLRESS, Common_Movement_FaceRight)
	waitmovement(0)
	applymovement(LOCALID_PLAYER, Movement_Player_EnterZone)
	waitmovement(0)
	switch (var(VAR_ZONE)) {
		case 1:
			warp(MAP_ZONE1A, 255, 16, 28)
		case 2:
			warp(MAP_ZONE2A, 255, 10, 8)
		case 3:
			setflag(FLAG_HIDE_ZONE3A_PHILLIPA)
			setflag(FLAG_HIDE_ZONE3A_REMI)
			warp(MAP_ZONE3A, 255, 38, 25)
		case 4:
			warp(MAP_ZONE4A, 255, 3, 4)
		case 5:
			warp(MAP_ZONE5A, 255, 39, 15)
		case 6:
			warp(MAP_ZONE6A, 255, 51, 22)
		case 7:
			warp(MAP_ZONE7A, 255, 10, 33)
	}
	waitstate
	end
}

script Sanctuary_EventScript_EnterZone {
	setflag(FLAG_IN_NEW_ZONE)
	msgbox(format("Bring out the strength of you and your Pokémon!"), MSGBOX_AUTOCLOSE)
	applymovement(LOCALID_COLRESS, Common_Movement_WalkUp)
	waitmovement(0)
	applymovement(LOCALID_COLRESS, Common_Movement_WalkLeft)
	waitmovement(0)
	applymovement(LOCALID_COLRESS, Common_Movement_FaceRight)
	waitmovement(0)
	applymovement(LOCALID_PLAYER, Movement_Player_EnterZone)
	waitmovement(0)
	return
}

movement Movement_Player_EnterZone {
	player_run_up * 5
}

text Sanctuary_Text_Colress_EndofDemo {
	format("This is the end of the demo. Our engineers are still working on the remainder of {COLOR RED}Pokémon Battle Labyrinth{COLOR DARK_GRAY}. Please save your game using the in game save so you might be able to transfer your save file to the next version when it comes out.")
}

text Sanctuary_Text_Colress_Upgraded {
	format("Congratulations! All shops are upgraded as a result of your progress!")
}

script Sanctuary_EventScript_EnterSanctuary {
    lockall
	setvar(VAR_GENERIC, 0)
	clearflag(FLAG_IN_NEW_ZONE)
	clearflag(FLAG_ZONE_PC_USED)
	call(Sanctuary_EventScript_MoveCameraUp)
	applymovement(LOCALID_COLRESS, Common_Movement_ExclamationMark)
	applymovement(LOCALID_PLAYER, Common_Movement_FaceUp)
	playse(SE_PIN)
	waitmovement(0)
	waitse
	call(Sanctuary_EventScript_MoveCameraDown)
	applymovement(LOCALID_COLRESS, Common_Movement_WalkDown2)
	waitmovement(0)
	playfanfare(MUS_OBTAIN_BADGE)
	call(EventScript_BufferCurrentZoneName)
	setspeaker(SP_NAME_COLRESS)
	msgbox(format("Congratulations. You have\ncompleted {COLOR GREEN}{STR_VAR_1}{COLOR DARK_GRAY}."))
	waitfanfare
	msgbox(format("Your reward for clearing {COLOR GREEN}{STR_VAR_1}{COLOR DARK_GRAY} is…"))
	switch (var(VAR_ZONE)) {
		case 1:
			msgbox(format("The {COLOR RED}Dowsing Machine{COLOR DARK_GRAY}!"), MSGBOX_DEFAULT)
			giveitem(ITEM_DOWSING_MACHINE)
		case 2:
			msgbox(format("5 {COLOR RED}Revives{COLOR DARK_GRAY}!"), MSGBOX_DEFAULT)
			giveitem(ITEM_REVIVE, 5)
		case 3:
			msgbox(format("The {COLOR RED}Machete!{COLOR DARK_GRAY}"), MSGBOX_DEFAULT)
			giveitem(ITEM_MACHETE)
		case 4:
			msgbox(format("{COLOR RED}TM09 - Venoshock!{COLOR DARK_GRAY}"), MSGBOX_DEFAULT)
			giveitem(ITEM_TM_VENOSHOCK)
		case 5:
			msgbox(format("The {COLOR RED}Portable PC{COLOR DARK_GRAY}!"))
			setflag(FLAG_SYS_START_MENU_PC_GET)
			playfanfare(MUS_OBTAIN_ITEM)
			msgbox(format("{PLAYER} received the {COLOR RED}Portable PC{COLOR DARK_GRAY}! It was added to the {START_BUTTON} menu."))
			waitfanfare
			msgbox(format("Note that if you are in a Zone, you can only use the Portable PC once before reaching the Sanctuary."))
		case 6:
			msgbox(format("{COLOR RED}TM78 - Bulldoze!{COLOR DARK_GRAY}"), MSGBOX_DEFAULT)
			giveitem(ITEM_TM_BULLDOZE)
		case 7:
			msgbox("Your reward for clearing {COLOR GREEN}Zone 7{COLOR DARK_GRAY} is…", MSGBOX_DEFAULT)
			msgbox(format("{COLOR RED}TM39 - Rock Tomb!{COLOR DARK_GRAY}"), MSGBOX_DEFAULT)
			giveitem(ITEM_TM_ROCK_TOMB)
			msgbox("Your reward for clearing {COLOR GREEN}Zone 8{COLOR DARK_GRAY} is…", MSGBOX_DEFAULT)
			msgbox(format("The {COLOR RED}Machete{COLOR DARK_GRAY}!"), MSGBOX_DEFAULT)
			giveitem(ITEM_MACHETE)
		case 9:
			msgbox(format("{COLOR RED}TM15 - Covet{COLOR DARK_GRAY}!"), MSGBOX_DEFAULT)
			giveitem(ITEM_TM_VENOSHOCK)
		case 10:
			msgbox(format("The {COLOR RED}Tera Orb{COLOR DARK_GRAY}!"), MSGBOX_DEFAULT)
			giveitem(ITEM_TERA_ORB)
			setflag(FLAG_USED_TERA)
			msgbox(format("In battle, you can Terastilize your Pokémon now.\pPress {START_BUTTON} to Terastilize!\pAfter you use it, you'll have to go back to the Pokémon Center to recharge it."))
		case 11:
			msgbox(format("TM86 - Grass Knot!"), MSGBOX_DEFAULT)
			giveitem(ITEM_TM_GRASS_KNOT)
		case 12:
			msgbox(format("Ultra Balls!"), MSGBOX_DEFAULT)
			giveitem(ITEM_ULTRA_BALL, 10)
	}
	switch(var(VAR_ZONE)) {
		case 1:
			completesubquest(QUEST_PBL, 0)
			setvar(VAR_ZONE, 2)
		case 2:
			setflag(FLAG_HIDE_ZONE2A_MAX)
			completesubquest(QUEST_PBL, 1)
			setvar(VAR_ZONE, 3)
		case 3:
			completesubquest(QUEST_PBL, 2)
			setvar(VAR_ZONE, 4)
			if (var(VAR_DIFFICULTY) == DIFFICULTY_BRUTAL) {
				setflag(FLAG_ITEM_ZONE3A_RARE_CANDY)
			}
		case 4:
			completesubquest(QUEST_PBL, 3)
			setvar(VAR_ZONE, 5)
		case 5:
			completesubquest(QUEST_PBL, 4)
			setvar(VAR_ZONE, 6)
			if (var(VAR_DIFFICULTY) == DIFFICULTY_BRUTAL) {
				setflag(FLAG_ITEM_ZONE5A_RARE_CANDY)
			}
			playfanfare(MUS_OBTAIN_ITEM)
			msgbox(Sanctuary_Text_Colress_Upgraded, MSGBOX_DEFAULT)
			waitfanfare
			setvar(VAR_FARM_STOCK, 10)
		case 6:
			setflag(FLAG_HIDE_ZONE6A_MAX)
			completesubquest(QUEST_PBL, 5)
			setvar(VAR_ZONE, 7)
			msgbox(format("The next two zones, {COLOR GREEN}Zone 7 - Gemini Heights{COLOR DARK_GRAY} and {COLOR GREEN}Zone 8 - Gemini Caves{COLOR DARK_GRAY}, are combined.\pYou will not be able to access a Sanctuary in between the Zones."), MSGBOX_DEFAULT)
		case 7:
			setflag(FLAG_ZONE7B_HEAL_USED)
			completesubquest(QUEST_PBL, 6)
			completesubquest(QUEST_PBL, 7)
		case 9:
			completesubquest(QUEST_PBL, 8)
			setvar(VAR_ZONE, 10)
		case 10:
			setflag(FLAG_HIDE_ZONE10A_MAX)
			completesubquest(QUEST_PBL, 9)
			setvar(VAR_ZONE, 11)
		case 11:
			completesubquest(QUEST_PBL, 10)
			setvar(VAR_ZONE, 12)
		case 12:
			completesubquest(QUEST_PBL, 11)
			setvar(VAR_ZONE, 13)
			msgbox(format("The next two zones, {COLOR GREEN}Zone 7 - Gemini Heights{COLOR DARK_GRAY} and {COLOR GREEN}Zone 8 - Gemini Caves{COLOR DARK_GRAY}, are combined.\pYou will not be able to access a Sanctuary in between the Zones."), MSGBOX_DEFAULT)
		case 13:
			completesubquest(QUEST_PBL, 12)
			completesubquest(QUEST_PBL, 13)
			setvar(VAR_ZONE, 15)
		case 15:
			completesubquest(QUEST_PBL, 14)
			setvar(VAR_ZONE, 16)
		case 16:
			completesubquest(QUEST_PBL, 15)
			setvar(VAR_ZONE, 17)
		case 17:
			completesubquest(QUEST_PBL, 16)
			setvar(VAR_ZONE, 18)
			msgbox(format("The next two zones, {COLOR GREEN}Zone 7 - Gemini Heights{COLOR DARK_GRAY} and {COLOR GREEN}Zone 8 - Gemini Caves{COLOR DARK_GRAY}, are combined.\pYou will not be able to access a Sanctuary in between the Zones."), MSGBOX_DEFAULT)
		case 18:
			completesubquest(QUEST_PBL, 17)
			completesubquest(QUEST_PBL, 18)
			setvar(VAR_ZONE, 20)
		case 20:
			completesubquest(QUEST_PBL, 19)
			setvar(VAR_ZONE, 21)
		case 21:
			completesubquest(QUEST_PBL, 21)
			setvar(VAR_ZONE, 22)
		case 22:
			completesubquest(QUEST_PBL, 22)
			setvar(VAR_ZONE, 23)
		case 23:
			completesubquest(QUEST_PBL, 23)
			setvar(VAR_ZONE, 24)
			msgbox(format("The next two zones, {COLOR GREEN}Zone 7 - Gemini Heights{COLOR DARK_GRAY} and {COLOR GREEN}Zone 8 - Gemini Caves{COLOR DARK_GRAY}, are combined.\pYou will not be able to access a Sanctuary in between the Zones."), MSGBOX_DEFAULT)
		case 24:
			completesubquest(QUEST_PBL, 24)
			completesubquest(QUEST_PBL, 25)
			setvar(VAR_ZONE, 26)
		case 26:
			completesubquest(QUEST_PBL, 26)
			setvar(VAR_ZONE, 27)
		case 27:
			completesubquest(QUEST_PBL, 27)
			setvar(VAR_ZONE, 28)
		case 28:
			completesubquest(QUEST_PBL, 28)
			setvar(VAR_ZONE, 29)
		case 29:
			completesubquest(QUEST_PBL, 29)
			setvar(VAR_ZONE, 30)
		case 30:
			completesubquest(QUEST_PBL, 30)
			setvar(VAR_ZONE, 31)
		case 31:
			completesubquest(QUEST_PBL, 31)
			setvar(VAR_ZONE, 32)
		case 32:
			completesubquest(QUEST_PBL, 32)
			setvar(VAR_ZONE, 33)
		case 33:
			completesubquest(QUEST_PBL, 33)
			setvar(VAR_ZONE, 34)
		case 34:
			completesubquest(QUEST_PBL, 34)
			setvar(VAR_ZONE, 35)
		case 35:
			completesubquest(QUEST_PBL, 35)
			setvar(VAR_ZONE, 36)
		case 36:
			completesubquest(QUEST_PBL, 36)
			setvar(VAR_ZONE, 37)
		case 37:
			completesubquest(QUEST_PBL, 37)
			setvar(VAR_ZONE, 38)
		case 38:
			completesubquest(QUEST_PBL, 38)
			setvar(VAR_ZONE, 39)
		case 39:
			completesubquest(QUEST_PBL, 39)
			setvar(VAR_ZONE, 40)
		case 40:
			completesubquest(QUEST_PBL, 40)
			setvar(VAR_ZONE, 41)
		case 41:
			completesubquest(QUEST_PBL, 41)
			setvar(VAR_ZONE, 42)
		case 42:
			completesubquest(QUEST_PBL, 42)
			setvar(VAR_ZONE, 43)
		case 43:
			completesubquest(QUEST_PBL, 43)
			setvar(VAR_ZONE, 44)
		case 44:
			completesubquest(QUEST_PBL, 44)
			setvar(VAR_ZONE, 45)
		case 45:
			completesubquest(QUEST_PBL, 45)
			setvar(VAR_ZONE, 46)
		case 46:
			completesubquest(QUEST_PBL, 46)
			setvar(VAR_ZONE, 47)
		case 47:
			completesubquest(QUEST_PBL, 47)
			setvar(VAR_ZONE, 48)
		case 48:
			completesubquest(QUEST_PBL, 48)
			setvar(VAR_ZONE, 49)
		case 49:
			completesubquest(QUEST_PBL, 49)
			setvar(VAR_ZONE, 50)
		case 50:
			completesubquest(QUEST_PBL, 50)
			setvar(VAR_ZONE, 51)
	}
	call(EventScript_WhenUReadyDialogue)
	applymovement(LOCALID_COLRESS, Common_Movement_Colress_WalkUp)
	waitmovement(0)
	call(EventScript_AskSaveGame)
	releaseall
	end
}

movement Common_Movement_Colress_WalkUp {
	walk_up * 2
	face_down
}

script Sanctuary_EventScript_MoveCameraUp {
	special(SpawnCameraObject)
	applymovement(LOCALID_CAMERA, Common_Movement_WalkUp2)
	waitmovement(0)
	special(RemoveCameraObject)
	return
}

script Sanctuary_EventScript_MoveCameraDown {
	special(SpawnCameraObject)
	applymovement(LOCALID_CAMERA, Common_Movement_WalkDown2)
	waitmovement(0)
	special(RemoveCameraObject)
	return
}

script Sanctuary_EventScript_GameIntro {
    lockall
	call(EventScript_GameIntro_SetStartingVariablesAndFlags)
	call(Sanctuary_EventScript_MoveCameraUp)
	applymovement(LOCALID_COLRESS, Common_Movement_ExclamationMark)
	playse(SE_PIN)
	waitmovement(0)
	waitse
	applymovement(LOCALID_PLAYER, Common_Movement_FaceUp)
	setspeaker(SP_NAME_COLRESS)
	msgbox(format("Ah. You've arrived."), MSGBOX_AUTOCLOSE)
	applymovement(LOCALID_COLRESS, Common_Movement_WalkDown2)
	call(Sanctuary_EventScript_MoveCameraDown)
	waitmovement(0)
	setspeaker(SP_NAME_COLRESS)
	msgbox("Welcome to\n{COLOR RED}Pokémon Battle Labyrinth{COLOR DARK_GRAY}!\pI am your guide for braving the\nchallenges ahead.\pWould you like to listen to the tutorial?", MSGBOX_YESNO)
	if (var(VAR_RESULT) == YES) {
		setflag(FLAG_TEMP_1)
		msgbox(format("Pokémon Battle Labyrinth is comprised of many {COLOR GREEN}Zones{COLOR DARK_GRAY} you must traverse.\p"
		"In these Zones, you can encounter wild Pokémon, find great treasures, challenge fierce opponents, and more.\p"
		"Each Zone typically contains a {COLOR GREEN}Leviathan{COLOR DARK_GRAY} or other boss that must be defeated in order to proceed.\p"
		"When you complete a Zone, you will return to this area, the {COLOR GREEN}Sanctuary{COLOR DARK_GRAY}, where you can heal your Pokémon, purchase supplies, and prepare for the next Zone.\p"
		"Once you enter a new Zone, you will not be able to access the Sanctuary until you complete that Zone.\p"
		"As you complete more Zones, more items, quests, and services are unlocked.\p"
		"In order to win, you must progress through all Zones, overcoming all challenges you face along the way."))
	}
	call(EventScript_GameIntro_Difficulty)
	call(EventScript_GameIntro_Nuzlocke)
	if (flag(FLAG_SETTINGS_NUZLOCKE)) {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("As a new challenger, you will receive a starter Pokémon.\p"
		"On {COLOR RED}Nuzlocke{COLOR DARK_GRAY}, your choice is limited from the pool of possible starters to only three options.\p"
		"Choose carefully as these Pokémon are very rare."))
		special(ChooseStarter)
		waitstate
	} else {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("As a new challenger, you will receive a starter Pokémon.\p"
		"You may have your choice of any of the generation 1-9 starter Pokémon.\p"
		"Choose carefully as these Pokémon are very rare."))
		call(Sanctuary_EventScript_HandleStarterSelectionDefault)
	}
	bufferleadmonspeciesname(0)
	setspeaker(SP_NAME_COLRESS)
	msgbox(format("How about a nickname for your {STR_VAR_1}?"), MSGBOX_YESNO)
	if (var(VAR_RESULT) == YES) {
		setvar(VAR_0x8004, 0)
		call(Common_EventScript_NameReceivedPartyMon)
	}
	if (flag(FLAG_TEMP_1)) {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("I also have a beginner's kit with items and cash to get you started."), MSGBOX_DEFAULT)
		giveitem(ITEM_POKE_BALL, 15)
		giveitem(ITEM_POTION, 10)
		playfanfare(MUS_OBTAIN_ITEM)
		msgbox(format("Received {COLOR RED}¥5000{COLOR DARK_GRAY}!"), MSGBOX_DEFAULT)
		waitfanfare
		playfanfare(MUS_OBTAIN_ITEM)
		msgbox(format("Received the {COLOR RED}Pokédex{COLOR DARK_GRAY}!"), MSGBOX_DEFAULT)
		waitfanfare
		msgbox(format("Received the {COLOR RED}DexNav{COLOR DARK_GRAY}!"), MSGBOX_DEFAULT)
		waitfanfare
		giveitem(ITEM_NOTEBOOK)
	} else {
		additem(ITEM_POTION, 10)
		additem(ITEM_POKE_BALL, 15)
		additem(ITEM_NOTEBOOK)
	}
	setmonmetlocation(0, 255)
	callnative(UpdateFollowingPokemon)
	if (flag(FLAG_TEMP_1)) {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("I would recommend exploring the Sanctuary before you enter the first Zone.\pMany people here have free items or advice for new challengers."))
	} else {
		setspeaker(SP_NAME_COLRESS)
		msgbox(format("Since you've elected to skip the tutorial, would you like to skip all Sanctuary exploration as well?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == YES) {
			setflag(FLAG_JOY_INTRO)
			setflag(FLAG_TIM_INTRO)
			setflag(FLAG_COWGIRL_INTRO)
			setflag(FLAG_VARRICK_INTRO)
			setflag(FLAG_LELOUCH_INTRO)
			additem(ITEM_SUPER_ROD)
			additem(ITEM_INFINITE_REPEL)
			additem(ITEM_INFINITE_CANDY)
			additem(ITEM_HEXORB)
		}
	}
	call(EventScript_WhenUReadyDialogue)
	applymovement(LOCALID_COLRESS, Common_Movement_Colress_WalkUp)
	waitmovement(LOCALID_COLRESS)
	startquest(QUEST_PBL)
	releaseall
	end
}

script EventScript_GameIntro_SetStartingVariablesAndFlags {
	setflag(FLAG_SYS_B_DASH)
	setflag(FLAG_SYS_POKEMON_GET)
	setflag(FLAG_SYS_PC_LANETTE)
	setflag(FLAG_AUTORUN_TOGGLE)
	setflag(FLAG_SYS_DEXNAV_GET)
	setvar(VAR_FARM_STOCK, 10)
	setflag(FLAG_SYS_POKEDEX_GET)
	setflag(FLAG_SYS_EXP_SHARE)
	special(SetUnlockedPokedexFlags)
	setflag(FLAG_SYS_NATIONAL_DEX)
	special(EnableNationalPokedex)
	initclock(1, 1)
	callnative(InitTimeBasedEvents)
	setvar(VAR_ZONE, 1)
	setvar(VAR_LEVEL_CAP, 0)
	setrespawn(HEAL_LOCATION_PBL)
	setflag(FLAG_SYS_DEBUG) // to remove for release
}

script EventScript_GameIntro_Difficulty {
	setspeaker(SP_NAME_COLRESS)
	msgbox(format("Pokémon Battle Labyrinth has a few difficulty options. Please adjust the difficulty as you see fit."))
	while {
		call(EventScript_Difficulty_SetToMessage)
		setspeaker(SP_NAME_COLRESS)
		dynmultipush("Difficulty Info", 0)
		dynmultipush("Switch Difficulty", 1)
		dynmultipush("Confirm Difficulty", 2)
		dynmultistack(0, 0, FALSE, 3, FALSE, 0, DYN_MULTICHOICE_CB_NONE)
		switch (var(VAR_RESULT)) {
			case 0:
				call(EventScript_Difficulty_Info)
			case 1:
				call(EventScript_Difficulty_Switch)
			case 2:
			case MULTI_B_PRESSED:
				switch (var(VAR_DIFFICULTY)) {
					case DIFFICULTY_EASY:
						msgbox(format("Are you sure you want to play on {COLOR RED}Easy{COLOR DARK_GRAY}?"), MSGBOX_YESNO)
						if (var(VAR_RESULT) == YES) {
							return
						}
					case DIFFICULTY_NORMAL:
						msgbox(format("Are you sure you want to play on {COLOR RED}Normal{COLOR DARK_GRAY}?"), MSGBOX_YESNO)
						if (var(VAR_RESULT) == YES) {
							return
						}
					case DIFFICULTY_HARD:
						msgbox(format("Are you sure you want to play on {COLOR RED}Hard{COLOR DARK_GRAY}?"), MSGBOX_YESNO)
						if (var(VAR_RESULT) == YES) {
							return
						}
					case DIFFICULTY_BRUTAL:
						msgbox(format("Are you sure you want to play on {COLOR RED}Brutal{COLOR DARK_GRAY}?"), MSGBOX_YESNO)
						if (var(VAR_RESULT) == YES) {
							setflag(FLAG_TRUE_BRUTAL)
							return
						}
				}
		}
	}
}

script EventScript_GameIntro_Nuzlocke {
	while {
		setspeaker(SP_NAME_COLRESS)
		message(format("There is a built-in {COLOR RED}Nuzlocke{COLOR DARK_GRAY} mode. Would you like to enable it?"))
		waitmessage
		dynmultichoice(20, 6, FALSE, 3, 0, DYN_MULTICHOICE_CB_NONE, "Info", "Yes", "No")
		switch (var(VAR_RESULT)) {
			case 0:
				setspeaker(SP_NAME_COLRESS)
				msgbox(gText_Colress_NuzlockeExplained)
			case 1:
				setspeaker(SP_NAME_COLRESS)
				msgbox(format("Are you sure you want to enable {COLOR RED}Nuzlocke{COLOR DARK_GRAY} mode?"), MSGBOX_YESNO)
				if (var(VAR_RESULT) == YES) {
					setflag(FLAG_SETTINGS_NUZLOCKE)
					setspeaker(SP_NAME_COLRESS)
					msgbox(format("{COLOR RED}Nuzlocke{COLOR DARK_GRAY} mode enabled."))
					return
				}
			case 2:
			case MULTI_B_PRESSED:
				msgbox(format("{COLOR RED}Nuzlocke{COLOR DARK_GRAY} mode disabled."))
				return
		}
	}
}

script Sanctuary_EventScript_HandleStarterSelectionDefault {
	while {
		setspeaker(SP_NAME_COLRESS)
		message(format("Choose a starter Pokémon.\nPress {B_BUTTON} to randomize."))
		waitmessage
		dynmultichoice(0, 0, FALSE, 5, 0, DYN_MULTICHOICE_CB_NONE, "Bulbasaur", "Charmander", "Squirtle", "Chikorita", "Cyndaquil", "Totodile", "Treecko", "Torchic", "Mudkip", "Turtwig", "Chimchar", "Piplup", "Snivy", "Tepig", "Oshawott", "Chespin", "Fennekin", "Froakie", "Rowlet", "Litten", "Popplio", "Grookey", "Scorbunny", "Sobble", "Sprigatito", "Fuecoco", "Quaxly", "Random")
		switch (var(VAR_RESULT)) {
			case 0:
				setvar(VAR_TEMP_3, SPECIES_BULBASAUR)
			case 1:
				setvar(VAR_TEMP_3, SPECIES_CHARMANDER)
			case 2:
				setvar(VAR_TEMP_3, SPECIES_SQUIRTLE)
			case 3:
				setvar(VAR_TEMP_3, SPECIES_CHIKORITA)
			case 4:
				setvar(VAR_TEMP_3, SPECIES_CYNDAQUIL)
			case 5:
				setvar(VAR_TEMP_3, SPECIES_TOTODILE)
			case 6:
				setvar(VAR_TEMP_3, SPECIES_TREECKO)
			case 7:
				setvar(VAR_TEMP_3, SPECIES_TORCHIC)
			case 8:
				setvar(VAR_TEMP_3, SPECIES_MUDKIP)
			case 9:
				setvar(VAR_TEMP_3, SPECIES_TURTWIG)
			case 10:
				setvar(VAR_TEMP_3, SPECIES_CHIMCHAR)
			case 11:
				setvar(VAR_TEMP_3, SPECIES_PIPLUP)
			case 12:
				setvar(VAR_TEMP_3, SPECIES_SNIVY)
			case 13:
				setvar(VAR_TEMP_3, SPECIES_TEPIG)
			case 14:
				setvar(VAR_TEMP_3, SPECIES_OSHAWOTT)
			case 15:
				setvar(VAR_TEMP_3, SPECIES_CHESPIN)
			case 16:
				setvar(VAR_TEMP_3, SPECIES_FENNEKIN)
			case 17:
				setvar(VAR_TEMP_3, SPECIES_FROAKIE)
			case 18:
				setvar(VAR_TEMP_3, SPECIES_ROWLET)
			case 19:
				setvar(VAR_TEMP_3, SPECIES_LITTEN)
			case 20:
				setvar(VAR_TEMP_3, SPECIES_POPPLIO)
			case 21:
				setvar(VAR_TEMP_3, SPECIES_GROOKEY)
			case 22:
				setvar(VAR_TEMP_3, SPECIES_SCORBUNNY)
			case 23:
				setvar(VAR_TEMP_3, SPECIES_SOBBLE)
			case 24:
				setvar(VAR_TEMP_3, SPECIES_SPRIGATITO)
			case 25:
				setvar(VAR_TEMP_3, SPECIES_FUECOCO)
			case 26:
				setvar(VAR_TEMP_3, SPECIES_QUAXLY)
			case 27:
			case MULTI_B_PRESSED:
				setvar(VAR_TEMP_3, 0)
		}
		if (var(VAR_TEMP_3) == 0) {
			playse(SE_CONTEST_PLACE)
			message(format("Randomizing…"))
			delay(32)
			waitse
			waitmessage
			random(27)
			switch (var(VAR_RESULT)) {
				case 0:
					setvar(VAR_TEMP_3, SPECIES_BULBASAUR)
				case 1:
					setvar(VAR_TEMP_3, SPECIES_CHARMANDER)
				case 2:
					setvar(VAR_TEMP_3, SPECIES_SQUIRTLE)
				case 3:
					setvar(VAR_TEMP_3, SPECIES_CHIKORITA)
				case 4:
					setvar(VAR_TEMP_3, SPECIES_CYNDAQUIL)
				case 5:
					setvar(VAR_TEMP_3, SPECIES_TOTODILE)
				case 6:
					setvar(VAR_TEMP_3, SPECIES_TREECKO)
				case 7:
					setvar(VAR_TEMP_3, SPECIES_TORCHIC)
				case 8:
					setvar(VAR_TEMP_3, SPECIES_MUDKIP)
				case 9:
					setvar(VAR_TEMP_3, SPECIES_TURTWIG)
				case 10:
					setvar(VAR_TEMP_3, SPECIES_CHIMCHAR)
				case 11:
					setvar(VAR_TEMP_3, SPECIES_PIPLUP)
				case 12:
					setvar(VAR_TEMP_3, SPECIES_SNIVY)
				case 13:
					setvar(VAR_TEMP_3, SPECIES_TEPIG)
				case 14:
					setvar(VAR_TEMP_3, SPECIES_OSHAWOTT)
				case 15:
					setvar(VAR_TEMP_3, SPECIES_CHESPIN)
				case 16:
					setvar(VAR_TEMP_3, SPECIES_FENNEKIN)
				case 17:
					setvar(VAR_TEMP_3, SPECIES_FROAKIE)
				case 18:
					setvar(VAR_TEMP_3, SPECIES_ROWLET)
				case 19:
					setvar(VAR_TEMP_3, SPECIES_LITTEN)
				case 20:
					setvar(VAR_TEMP_3, SPECIES_POPPLIO)
				case 21:
					setvar(VAR_TEMP_3, SPECIES_GROOKEY)
				case 22:
					setvar(VAR_TEMP_3, SPECIES_SCORBUNNY)
				case 23:
					setvar(VAR_TEMP_3, SPECIES_SOBBLE)
				case 24:
					setvar(VAR_TEMP_3, SPECIES_SPRIGATITO)
				case 25:
					setvar(VAR_TEMP_3, SPECIES_FUECOCO)
				case 26:
					setvar(VAR_TEMP_3, SPECIES_QUAXLY)
			}
		}
		bufferspeciesname(0, VAR_TEMP_3)
		showmonpic(VAR_TEMP_3, 10, 3)
		playmoncry(VAR_TEMP_3, 0)
		waitmoncry
		msgbox(format("You want {STR_VAR_1} as your starter?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == YES) {
			hidemonpic
			switch(var(VAR_TEMP_3)) {
				case SPECIES_BULBASAUR:
				case SPECIES_CHIKORITA:
				case SPECIES_TREECKO:
				case SPECIES_TURTWIG:
				case SPECIES_SNIVY:
				case SPECIES_CHESPIN:
				case SPECIES_ROWLET:
				case SPECIES_GROOKEY:
				case SPECIES_SPRIGATITO:
					setvar(VAR_STARTER_MON, 0)
				case SPECIES_CHARMANDER:
				case SPECIES_CYNDAQUIL:
				case SPECIES_TORCHIC:
				case SPECIES_CHIMCHAR:
				case SPECIES_TEPIG:
				case SPECIES_FENNEKIN:
				case SPECIES_LITTEN:
				case SPECIES_SCORBUNNY:
				case SPECIES_FUECOCO:
					setvar(VAR_STARTER_MON, 1)
				case SPECIES_SQUIRTLE:
				case SPECIES_TOTODILE:
				case SPECIES_MUDKIP:
				case SPECIES_PIPLUP:
				case SPECIES_OSHAWOTT:
				case SPECIES_FROAKIE:
				case SPECIES_POPPLIO:
				case SPECIES_SOBBLE:
				case SPECIES_QUAXLY:
					setvar(VAR_STARTER_MON, 2)
			}
			givemon(VAR_TEMP_3, 5, ITEM_NONE)
			playfanfare(MUS_OBTAIN_ITEM)
			message(format("{PLAYER} received the {STR_VAR_1}!"))
			waitmessage
			waitfanfare
			return
		}
		hidemonpic
	}
}

script EventScript_WhenUReadyDialogue {
	call(EventScript_BufferCurrentZoneName)
	setspeaker("Colress")
	msgbox(format("When you are prepared to enter {COLOR GREEN}{STR_VAR_1}{COLOR DARK_GRAY}, speak to me."), MSGBOX_AUTOCLOSE)
}

script EventScript_Shop_Cowgirl {
	lock
	faceplayer
	setspeaker("Cowgirl")
	if (flag(FLAG_COWGIRL_INTRO) == FALSE) {
		msgbox(format("Howdy! Welcome to the Farmer's Stand."))
		call(EventScript_Shop_FarmersStand_Info)
		setflag(FLAG_COWGIRL_INTRO)
	}
	call(Sanctuary_EventScript_MoveCameraUp)
	showmoneybox(18, 0)
	call(EventScript_Shop_FarmersStand)
	hidemoneybox
	setspeaker("Cowgirl")
	msgbox(format("So long, partner!"), MSGBOX_AUTOCLOSE)
	call(Sanctuary_EventScript_MoveCameraDown)
	release
	end
}

script EventScript_Shop_FarmersStand {
	while {
		setspeaker("Cowgirl")
		buffernumberstring(0, VAR_FARM_STOCK)
		message("Howdy! Welcome to the Farmer's Stand.\nYou can buy up to {STR_VAR_1} items.")
		waitmessage
		dynmultipush("Shop Info", 0)
		dynmultipush("Ability Snack", ITEM_ABILITY_SNACK)
		dynmultipush("Honey", ITEM_HONEY)
		dynmultipush("Serious Mint", ITEM_SERIOUS_MINT)
		if (var(VAR_ZONE) > 10) {
			dynmultipush("Gentle Mint", ITEM_GENTLE_MINT)
			dynmultipush("Lax Mint", ITEM_LAX_MINT)
		}
		if (var(VAR_ZONE) > 15) {
			dynmultipush("Relaxed Mint", ITEM_RELAXED_MINT)
			dynmultipush("Sassy Mint", ITEM_SASSY_MINT)
		}
		if (var(VAR_ZONE) > 20) {
			dynmultipush("Bold Mint", ITEM_BOLD_MINT)
			dynmultipush("Impish Mint", ITEM_IMPISH_MINT)
			dynmultipush("Calm Mint", ITEM_CALM_MINT)
			dynmultipush("Careful Mint", ITEM_CAREFUL_MINT)
			dynmultipush("Quiet Mint", ITEM_QUIET_MINT)
			dynmultipush("Brave Mint", ITEM_BRAVE_MINT)
		}
		if (var(VAR_ZONE) > 35) {
			dynmultipush("Lonely Mint", ITEM_LONELY_MINT)
			dynmultipush("Adamant Mint", ITEM_ADAMANT_MINT)
			dynmultipush("Naughty Mint", ITEM_NAUGHTY_MINT)
			dynmultipush("Modest Mint", ITEM_MODEST_MINT)
			dynmultipush("Mild Mint", ITEM_MILD_MINT)
			dynmultipush("Rash Mint", ITEM_RASH_MINT)
			dynmultipush("Timid Mint", ITEM_TIMID_MINT)
			dynmultipush("Hasty Mint", ITEM_HASTY_MINT)
			dynmultipush("Jolly Mint", ITEM_JOLLY_MINT)
			dynmultipush("Naive Mint", ITEM_NAIVE_MINT)
		}
		dynmultipush("Exp. Candy XS", ITEM_EXP_CANDY_XS)
		if (var(VAR_ZONE) > 10) {
			dynmultipush("Exp. Candy S", ITEM_EXP_CANDY_XS)
		}
		if (var(VAR_ZONE) > 20) {
			dynmultipush("Exp. Candy M", ITEM_EXP_CANDY_M)
		}
		if (var(VAR_ZONE) > 35) {
			dynmultipush("Exp. Candy L", ITEM_EXP_CANDY_L)
		}
		if (var(VAR_ZONE) > 45) {
			dynmultipush("Exp. Candy XL", ITEM_EXP_CANDY_XL)
		}
		dynmultipush("Oran Berry", ITEM_ORAN_BERRY)
		dynmultipush("Cheri Berry", ITEM_CHERI_BERRY)
		dynmultipush("Chesto Berry", ITEM_CHESTO_BERRY)
		dynmultipush("Pecha Berry", ITEM_PECHA_BERRY)
		dynmultipush("Rawst Berry", ITEM_RAWST_BERRY)
		dynmultipush("Aspear Berry", ITEM_ASPEAR_BERRY)
		dynmultipush("Persim Berry", ITEM_PERSIM_BERRY)
		if (var(VAR_ZONE) > 5) {
			dynmultipush("Sitrus Berry", ITEM_SITRUS_BERRY)
		}
		if (var(VAR_ZONE) > 30) {
			dynmultipush("Occa Berry", ITEM_OCCA_BERRY)
			dynmultipush("Passho Berry", ITEM_PASSHO_BERRY)
			dynmultipush("Wacan Berry", ITEM_WACAN_BERRY)
			dynmultipush("Rindo Berry", ITEM_RINDO_BERRY)
			dynmultipush("Yache Berry", ITEM_YACHE_BERRY)
			dynmultipush("Chople Berry", ITEM_CHOPLE_BERRY)
			dynmultipush("Kebia Berry", ITEM_KEBIA_BERRY)
			dynmultipush("Shuca Berry", ITEM_SHUCA_BERRY)
			dynmultipush("Coba Berry", ITEM_COBA_BERRY)
			dynmultipush("Payapa Berry", ITEM_PAYAPA_BERRY)
			dynmultipush("Tanga Berry", ITEM_TANGA_BERRY)
			dynmultipush("Charti Berry", ITEM_CHARTI_BERRY)
			dynmultipush("Kasib Berry", ITEM_KASIB_BERRY)
			dynmultipush("Haban Berry", ITEM_HABAN_BERRY)
			dynmultipush("Colbur Berry", ITEM_COLBUR_BERRY)
			dynmultipush("Babiri Berry", ITEM_BABIRI_BERRY)
			dynmultipush("Chilan Berry", ITEM_CHILAN_BERRY)
			dynmultipush("Roseli Berry", ITEM_ROSELI_BERRY)
		}
		if (var(VAR_ZONE) > 25) {
			dynmultipush("Lum Berry", ITEM_LUM_BERRY)
		}
		if (var(VAR_ZONE) > 40) {
			dynmultipush("Figy Berry", ITEM_FIGY_BERRY)
			dynmultipush("Wiki Berry", ITEM_WIKI_BERRY)
			dynmultipush("Mago Berry", ITEM_MAGO_BERRY)
			dynmultipush("Aguav Berry", ITEM_AGUAV_BERRY)
			dynmultipush("Iapapa Berry", ITEM_IAPAPA_BERRY)
			dynmultipush("Liechi Berry", ITEM_LIECHI_BERRY)
			dynmultipush("Ganlon Berry", ITEM_GANLON_BERRY)
			dynmultipush("Salac Berry", ITEM_SALAC_BERRY)
			dynmultipush("Petaya Berry", ITEM_PETAYA_BERRY)
			dynmultipush("Apicot Berry", ITEM_APICOT_BERRY)
			dynmultipush("Lansat Berry", ITEM_LANSAT_BERRY)
			dynmultipush("Starf Berry", ITEM_STARF_BERRY)
			dynmultipush("Enigma Berry", ITEM_ENIGMA_BERRY)
			dynmultipush("Micle Berry", ITEM_MICLE_BERRY)
			dynmultipush("Custap Berry", ITEM_CUSTAP_BERRY)
			dynmultipush("Jaboca Berry", ITEM_JABOCA_BERRY)
			dynmultipush("Rowap Berry", ITEM_ROWAP_BERRY)
			// dynmultipush("Kee Berry", ITEM_KEE_BERRY)
			// dynmultipush("Maranga Berry", ITEM_MARANGA_BERRY)
		}
		dynmultipush("Exit", 1000)
		dynmultistack(0, 0, FALSE, 5, FALSE, 0, DYN_MULTICHOICE_CB_SHOW_ITEM)
		switch (var(VAR_RESULT)) {
			case 0:
				call(EventScript_Shop_FarmersStand_Info)
				setvar(VAR_TEMP_0, ITEM_NONE)
			case 1000:
			case MULTI_B_PRESSED:
				return
			case ITEM_ORAN_BERRY:
				setvar(VAR_TEMP_0, ITEM_ORAN_BERRY)
			case ITEM_CHERI_BERRY:
				setvar(VAR_TEMP_0, ITEM_CHERI_BERRY)
			case ITEM_CHESTO_BERRY:
				setvar(VAR_TEMP_0, ITEM_CHESTO_BERRY)
			case ITEM_PECHA_BERRY:
				setvar(VAR_TEMP_0, ITEM_PECHA_BERRY)
			case ITEM_RAWST_BERRY:
				setvar(VAR_TEMP_0, ITEM_RAWST_BERRY)
			case ITEM_ASPEAR_BERRY:
				setvar(VAR_TEMP_0, ITEM_ASPEAR_BERRY)
			case ITEM_PERSIM_BERRY:
				setvar(VAR_TEMP_0, ITEM_PERSIM_BERRY)
			case ITEM_ABILITY_SNACK:
				setvar(VAR_TEMP_0, ITEM_ABILITY_SNACK)
			case ITEM_SERIOUS_MINT:
				setvar(VAR_TEMP_0, ITEM_SERIOUS_MINT)
			case ITEM_SITRUS_BERRY:
				setvar(VAR_TEMP_0, ITEM_SITRUS_BERRY)
			case ITEM_OCCA_BERRY:
				setvar(VAR_TEMP_0, ITEM_OCCA_BERRY)
			case ITEM_PASSHO_BERRY:
				setvar(VAR_TEMP_0, ITEM_PASSHO_BERRY)
			case ITEM_WACAN_BERRY:
				setvar(VAR_TEMP_0, ITEM_WACAN_BERRY)
			case ITEM_RINDO_BERRY:
				setvar(VAR_TEMP_0, ITEM_RINDO_BERRY)
			case ITEM_YACHE_BERRY:
				setvar(VAR_TEMP_0, ITEM_YACHE_BERRY)
			case ITEM_CHOPLE_BERRY:
				setvar(VAR_TEMP_0, ITEM_CHOPLE_BERRY)
			case ITEM_KEBIA_BERRY:
				setvar(VAR_TEMP_0, ITEM_KEBIA_BERRY)
			case ITEM_SHUCA_BERRY:
				setvar(VAR_TEMP_0, ITEM_SHUCA_BERRY)
			case ITEM_COBA_BERRY:
				setvar(VAR_TEMP_0, ITEM_COBA_BERRY)
			case ITEM_PAYAPA_BERRY:
				setvar(VAR_TEMP_0, ITEM_PAYAPA_BERRY)
			case ITEM_TANGA_BERRY:
				setvar(VAR_TEMP_0, ITEM_TANGA_BERRY)
			case ITEM_CHARTI_BERRY:
				setvar(VAR_TEMP_0, ITEM_CHARTI_BERRY)
			case ITEM_KASIB_BERRY:
				setvar(VAR_TEMP_0, ITEM_KASIB_BERRY)
			case ITEM_HABAN_BERRY:
				setvar(VAR_TEMP_0, ITEM_HABAN_BERRY)
			case ITEM_COLBUR_BERRY:
				setvar(VAR_TEMP_0, ITEM_COLBUR_BERRY)
			case ITEM_BABIRI_BERRY:
				setvar(VAR_TEMP_0, ITEM_BABIRI_BERRY)
			case ITEM_CHILAN_BERRY:
				setvar(VAR_TEMP_0, ITEM_CHILAN_BERRY)
			case ITEM_ROSELI_BERRY:
				setvar(VAR_TEMP_0, ITEM_ROSELI_BERRY)
			case ITEM_LUM_BERRY:
				setvar(VAR_TEMP_0, ITEM_LUM_BERRY)
			case ITEM_LONELY_MINT:
				setvar(VAR_TEMP_0, ITEM_LONELY_MINT)
			case ITEM_ADAMANT_MINT:
				setvar(VAR_TEMP_0, ITEM_ADAMANT_MINT)
			case ITEM_NAUGHTY_MINT:
				setvar(VAR_TEMP_0, ITEM_NAUGHTY_MINT)
			case ITEM_BRAVE_MINT:
				setvar(VAR_TEMP_0, ITEM_BRAVE_MINT)
			case ITEM_BOLD_MINT:
				setvar(VAR_TEMP_0, ITEM_BOLD_MINT)
			case ITEM_IMPISH_MINT:
				setvar(VAR_TEMP_0, ITEM_IMPISH_MINT)
			case ITEM_LAX_MINT:
				setvar(VAR_TEMP_0, ITEM_LAX_MINT)
			case ITEM_RELAXED_MINT:
				setvar(VAR_TEMP_0, ITEM_RELAXED_MINT)
			case ITEM_MODEST_MINT:
				setvar(VAR_TEMP_0, ITEM_MODEST_MINT)
			case ITEM_MILD_MINT:
				setvar(VAR_TEMP_0, ITEM_MILD_MINT)
			case ITEM_RASH_MINT:
				setvar(VAR_TEMP_0, ITEM_RASH_MINT)
			case ITEM_QUIET_MINT:
				setvar(VAR_TEMP_0, ITEM_QUIET_MINT)
			case ITEM_CALM_MINT:
				setvar(VAR_TEMP_0, ITEM_CALM_MINT)
			case ITEM_GENTLE_MINT:
				setvar(VAR_TEMP_0, ITEM_GENTLE_MINT)
			case ITEM_CAREFUL_MINT:
				setvar(VAR_TEMP_0, ITEM_CAREFUL_MINT)
			case ITEM_SASSY_MINT:
				setvar(VAR_TEMP_0, ITEM_SASSY_MINT)
			case ITEM_TIMID_MINT:
				setvar(VAR_TEMP_0, ITEM_TIMID_MINT)
			case ITEM_HASTY_MINT:
				setvar(VAR_TEMP_0, ITEM_HASTY_MINT)
			case ITEM_JOLLY_MINT:
				setvar(VAR_TEMP_0, ITEM_JOLLY_MINT)
			case ITEM_NAIVE_MINT:
				setvar(VAR_TEMP_0, ITEM_NAIVE_MINT)
			case ITEM_HONEY:
				setvar(VAR_TEMP_0, ITEM_HONEY)
			case ITEM_FIGY_BERRY:
				setvar(VAR_TEMP_0, ITEM_FIGY_BERRY)
			case ITEM_WIKI_BERRY:
				setvar(VAR_TEMP_0, ITEM_WIKI_BERRY)
			case ITEM_MAGO_BERRY:
				setvar(VAR_TEMP_0, ITEM_MAGO_BERRY)
			case ITEM_AGUAV_BERRY:
				setvar(VAR_TEMP_0, ITEM_AGUAV_BERRY)
			case ITEM_IAPAPA_BERRY:
				setvar(VAR_TEMP_0, ITEM_IAPAPA_BERRY)
			case ITEM_LIECHI_BERRY:
				setvar(VAR_TEMP_0, ITEM_LIECHI_BERRY)
			case ITEM_GANLON_BERRY:
				setvar(VAR_TEMP_0, ITEM_GANLON_BERRY)
			case ITEM_SALAC_BERRY:
				setvar(VAR_TEMP_0, ITEM_SALAC_BERRY)
			case ITEM_PETAYA_BERRY:
				setvar(VAR_TEMP_0, ITEM_PETAYA_BERRY)
			case ITEM_APICOT_BERRY:
				setvar(VAR_TEMP_0, ITEM_APICOT_BERRY)
			case ITEM_LANSAT_BERRY:
				setvar(VAR_TEMP_0, ITEM_LANSAT_BERRY)
			case ITEM_STARF_BERRY:
				setvar(VAR_TEMP_0, ITEM_STARF_BERRY)
			case ITEM_ENIGMA_BERRY:
				setvar(VAR_TEMP_0, ITEM_ENIGMA_BERRY)
			case ITEM_MICLE_BERRY:
				setvar(VAR_TEMP_0, ITEM_MICLE_BERRY)
			case ITEM_CUSTAP_BERRY:
				setvar(VAR_TEMP_0, ITEM_CUSTAP_BERRY)
			case ITEM_JABOCA_BERRY:
				setvar(VAR_TEMP_0, ITEM_JABOCA_BERRY)
			case ITEM_ROWAP_BERRY:
				setvar(VAR_TEMP_0, ITEM_ROWAP_BERRY)
			case ITEM_KEE_BERRY:
				setvar(VAR_TEMP_0, ITEM_KEE_BERRY)
			case ITEM_MARANGA_BERRY:
				setvar(VAR_TEMP_0, ITEM_MARANGA_BERRY)
		}
		call(EventScript_Shop_FarmersStand_BuyItem)
	}
}

script EventScript_Shop_FarmersStand_Info {
	setspeaker("Cowgirl")
	buffernumberstring(0, VAR_FARM_STOCK)
	msgbox(Text_Shop_FarmersStand_Info)
}

text Text_Shop_FarmersStand_Info {
	"We sell freshly grown or baked goods,\nall organically sourced, and it's\lsubsidized, so everything is dirt cheap!\p"
	"We do have a per-customer limit on how\nmany items you can buy, as our stock of\litems is limited.\p"
	"Currently, you can buy up to {STR_VAR_1} items,\nthough the limit will reset when we\lrestock our supply. (every 5th Zone)"
}

// This script assumes everything costs ¥80
script EventScript_Shop_FarmersStand_BuyItem {
	if (var(VAR_TEMP_0) == ITEM_NONE) {
		return
	}
	while {
		setspeaker("Cowgirl")
		if (var(VAR_FARM_STOCK) == 0) {
			msgbox(Text_Shop_FarmersStand_YouCantPurchaseMore)
			return
		}
		buffernumberstring(0, VAR_FARM_STOCK)
		bufferitemnameplural(1, VAR_TEMP_0, 2)
		message("How many {STR_VAR_2} do you want?\n(You can still buy up to {STR_VAR_1} items.)")
		waitmessage
		buffernumberstring(0, 80 * 1)
		dynmultipush("One - ¥{STR_VAR_1}", 0)
		if (var(VAR_FARM_STOCK) >= 5) {
			buffernumberstring(1, 80 * 5)
			dynmultipush("Five - ¥{STR_VAR_2}", 1)
		}
		if (var(VAR_FARM_STOCK) >= 10) {
			buffernumberstring(2, 80 * 10)
			dynmultipush("Ten - ¥{STR_VAR_3}", 2)
		}
		dynmultipush("Back", 3)
		dynmultistack(0, 0, FALSE, 4, FALSE, 0, DYN_MULTICHOICE_CB_NONE)
		switch (var(VAR_RESULT)) {
			case 0:
				if (checkmoney(80) == FALSE) {
					msgbox(gText_YouDontHaveEnoughMoney)
					break
				}
				buffernumberstring(0, 1)
				bufferitemnameplural(1, VAR_TEMP_0, 1)
				buffernumberstring(2, 80)
				msgbox("You want to buy {STR_VAR_1} {STR_VAR_2}?\nThat will be ¥{STR_VAR_3}.", MSGBOX_YESNO)
				if (var(VAR_RESULT) == YES) {
					removemoney(80)
					updatemoneybox
					playse(SE_SHOP)
					msgbox(gText_HereYouGoThankYou)
					waitse
					additem(VAR_TEMP_0, 1)
					subvar(VAR_FARM_STOCK, 1)
					return
				}
			case 1:
				if (checkmoney(80 * 5) == FALSE) {
					msgbox(gText_YouDontHaveEnoughMoney)
					break
				}
				buffernumberstring(0, 5)
				bufferitemnameplural(1, VAR_TEMP_0, 5)
				buffernumberstring(2, 80 * 5)
				msgbox("You want to buy {STR_VAR_1} {STR_VAR_2}?\nThat will be ¥{STR_VAR_3}.", MSGBOX_YESNO)
				if (var(VAR_RESULT) == YES) {
					removemoney(80 * 5)
					updatemoneybox
					playse(SE_SHOP)
					msgbox(gText_HereYouGoThankYou)
					waitse
					additem(VAR_TEMP_0, 5)
					subvar(VAR_FARM_STOCK, 5)
					return
				}
			case 2:
				if (checkmoney(80 * 10) == FALSE) {
					msgbox(gText_YouDontHaveEnoughMoney)
					break
				}
				buffernumberstring(0, 10)
				bufferitemnameplural(1, VAR_TEMP_0, 10)
				buffernumberstring(2, 80 * 10)
				msgbox("You want to buy {STR_VAR_1} {STR_VAR_2}?\nThat will be ¥{STR_VAR_3}.", MSGBOX_YESNO)
				if (var(VAR_RESULT) == YES) {
					removemoney(80 * 10)
					updatemoneybox
					playse(SE_SHOP)
					msgbox(gText_HereYouGoThankYou)
					waitse
					additem(VAR_TEMP_0, 10)
					subvar(VAR_FARM_STOCK, 10)
					return
				}
			case 3:
			case MULTI_B_PRESSED:
				return
		}
	}
}

text Text_Shop_FarmersStand_YouCantPurchaseMore {
	format("You've already reached the purchase limit, I'm afraid. Come back when we restock! (every 5th Zone)")
}

script EventScript_Fisherman {
	lock
	faceplayer
	if (checkitem(ITEM_SUPER_ROD) == FALSE) {
		msgbox(format("A Fisherman deigns to spread his love of fishing with others!"))
		giveitem(ITEM_SUPER_ROD)
	}
	msgbox(format("A Fisherman always fishes if he can!\pAnd a Fisherman checks what Pokémon are avaiable to fish using the DexNav!"), MSGBOX_AUTOCLOSE)
	applymovement(LOCALID_FISHERMAN, Common_Movement_FaceRight)
	waitmovement(LOCALID_FISHERMAN)
	release
}

script EventScript_ExpertM {
	lock
	faceplayer
	if (checkitem(ITEM_INFINITE_CANDY) == FALSE) {
		msgbox(format("I have studied the most effective training techniques for Pokémon, and developed these as the most optimal solution."))
		giveitem(ITEM_INFINITE_CANDY)
	}
	msgbox(format("This {COLOR RED}Infinite Candy{COLOR DARK_GRAY} can increase your Pokémon's level up to the prior level cap.\pThough it's not as strong as a true Rare Candy, which would be able to increase your Pokémon's level past the current level cap."), MSGBOX_AUTOCLOSE)
	applymovement(LOCALID_EXPERT_M, Common_Movement_FaceLeft)
	waitmovement(LOCALID_EXPERT_M)
	release
}

script EventScript_Hiker {
	lock
	faceplayer
	if (checkitem(ITEM_INFINITE_REPEL) == FALSE) {
		msgbox(format("When you're traveling through caves or other areas, you may want to avoid wild Pokémon altogether.\pSo why don't you have this?"))
		giveitem(ITEM_INFINITE_REPEL)
	}
	msgbox(format("That {COLOR RED}Infinite Repellent{COLOR DARK_GRAY} repels all wild Pokémon encounters, regardless of your Pokémon's level!"))
	release
}

script EventScript_Guitarist {
	lock
	faceplayer
	if (flag(FLAG_GUITARIST_INTRO) == FALSE) {
		msgbox(format("Yo! I have some sick tunes for you!\pI can change commonly heard music to other tracks if you want!"))
		setflag(FLAG_GUITARIST_INTRO)
	}
	call(EventScript_MusicMenu)
	msgbox(format("Rock on!"))
	release
}

script EventScript_MusicMenu {
	while {
		fadedefaultbgm
		message(format("Yo! Want me to change some tracks?"))
		dynmultichoice(0, 0, FALSE, 5, 0, DYN_MULTICHOICE_CB_NONE, "Sanctuary", "Wild Battle", "Trainer Battle", "Leviathan Battle", "Exit")
		switch (var(VAR_RESULT)) {
			case 0:
				call(EventScript_MusicMenu_Sanctuary)
			case 1:
				call(EventScript_MusicMenu_Wild)
			case 2:
				call(EventScript_MusicMenu_Trainer)
			case 3:
				call(EventScript_MusicMenu_Leviathan)
			case 4:
			case MULTI_B_PRESSED:
				return
		}
	}
}

script EventScript_MusicMenu_Sanctuary {
	while {
		switch (var(VAR_SANCTUARY_MUSIC)) {
			case 1:
				playbgm(MUS_DP_AMITY_SQUARE, FALSE)
				message("The Sanctuary music is\ncurrently set to Amity Square.")
			case 2:
				playbgm(MUS_PL_B_HALL, FALSE)
				message("The Sanctuary music is\ncurrently set to Battle Hall.")
			case 3:
				playbgm(MUS_BW_ACCUMULA, FALSE)
				message("The Sanctuary music is\ncurrently set to Accumula Town.")
			case 4:
				playbgm(MUS_BW_SKYARROW_BRIDGE, FALSE)
				message("The Sanctuary music is\ncurrently set to Skyarrow Bridge.")
			case 5:
				playbgm(MUS_BW_WHITE_FOREST, FALSE)
				message("The Sanctuary music is\ncurrently set to White Forest.")
			case 6:
				playbgm(MUS_BW_ANVILLE_TOWN, FALSE)
				message("The Sanctuary music is\ncurrently set to Anville Town.")
		}
		dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "Amity Square", "Battle Hall", "Accumula Town", "Skyarrow Bridge", "White Forest", "Anville Town")
		switch (var(VAR_RESULT)) {
			case 0:
				setvar(VAR_SANCTUARY_MUSIC, 1)
			case 1:
				setvar(VAR_SANCTUARY_MUSIC, 2)
			case 2:
				setvar(VAR_SANCTUARY_MUSIC, 3)
			case 3:
				setvar(VAR_SANCTUARY_MUSIC, 4)
			case 4:
				setvar(VAR_SANCTUARY_MUSIC, 5)
			case 5:
				setvar(VAR_SANCTUARY_MUSIC, 6)
			case MULTI_B_PRESSED:
				return
		}
	}
}

script EventScript_MusicMenu_Wild {
	while {
		switch (var(VAR_WILD_MUSIC)) {
			case 1:
				playbgm(MUS_VS_WILD, FALSE)
				message("The Wild Pokémon music is\ncurrently set to RSE.")
			case 2:
				playbgm(MUS_RG_VS_WILD, FALSE)
				message("The Wild Pokémon music is\ncurrently set to FRLG.")
			case 3:
				playbgm(MUS_DP_VS_WILD, FALSE)
				message("The Wild Pokémon music is\ncurrently set to DPPt.")
			case 4:
				playbgm(MUS_HG_VS_WILD, FALSE)
				message("The Wild Pokémon music is\ncurrently set to HGSS (Johto).")
			case 5:
				playbgm(MUS_HG_VS_WILD_KANTO, FALSE)
				message("The Wild Pokémon music is\ncurrently set to HGSS (Kanto).")
			case 6:
				playbgm(MUS_BW_VS_WILD, FALSE)
				message("The Wild Pokémon music is\ncurrently set to BW.")
		}
		dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "RSE", "FRLG", "DPPt", "HGSS (Johto)", "HGSS (Kanto)", "BW")
		switch (var(VAR_RESULT)) {
			case 0:
				setvar(VAR_WILD_MUSIC, 1)
			case 1:
				setvar(VAR_WILD_MUSIC, 2)
			case 2:
				setvar(VAR_WILD_MUSIC, 3)
			case 3:
				setvar(VAR_WILD_MUSIC, 4)
			case 4:
				setvar(VAR_WILD_MUSIC, 5)
			case 5:
				setvar(VAR_WILD_MUSIC, 6)
			case MULTI_B_PRESSED:
				return
		}
	}
}

script EventScript_MusicMenu_Trainer {
	while {
		switch (var(VAR_TRAINER_MUSIC)) {
			case 1:
				playbgm(MUS_VS_TRAINER, FALSE)
				message("The Trainer music is\ncurrently set to RSE.")
			case 2:
				playbgm(MUS_RG_VS_TRAINER, FALSE)
				message("The Trainer music is\ncurrently set to FRLG.")
			case 3:
				playbgm(MUS_DP_VS_TRAINER, FALSE)
				message("The Trainer music is\ncurrently set to DPPt.")
			case 4:
				playbgm(MUS_HG_VS_TRAINER, FALSE)
				message("The Trainer music is\ncurrently set to HGSS (Johto).")
			case 5:
				playbgm(MUS_HG_VS_TRAINER_KANTO, FALSE)
				message("The Trainer music is\ncurrently set to HGSS (Kanto).")
			case 6:
				playbgm(MUS_BW_VS_TRAINER, FALSE)
				message("The Trainer music is\ncurrently set to BW.")
		}
		dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "RSE", "FRLG", "DPPt", "HGSS (Johto)", "HGSS (Kanto)", "BW")
		switch (var(VAR_RESULT)) {
			case 0:
				setvar(VAR_TRAINER_MUSIC, 1)
			case 1:
				setvar(VAR_TRAINER_MUSIC, 2)
			case 2:
				setvar(VAR_TRAINER_MUSIC, 3)
			case 3:
				setvar(VAR_TRAINER_MUSIC, 4)
			case 4:
				setvar(VAR_TRAINER_MUSIC, 5)
			case 5:
				setvar(VAR_TRAINER_MUSIC, 6)
			case MULTI_B_PRESSED:
				return
		}
	}
}

script EventScript_MusicMenu_Leviathan {
	while {
		switch (var(VAR_LEVIATHAN_MUSIC)) {
			case 1:
				playbgm(MUS_VS_GYM_LEADER, FALSE)
				message("The Leviathan music is\ncurrently set to RSE.")
			case 2:
				playbgm(MUS_RG_VS_GYM_LEADER, FALSE)
				message("The Leviathan music is\ncurrently set to FRLG.")
			case 3:
				playbgm(MUS_DP_VS_GYM_LEADER, FALSE)
				message("The Leviathan music is\ncurrently set to DPPt.")
			case 4:
				playbgm(MUS_HG_VS_GYM_LEADER, FALSE)
				message("The Leviathan music is\ncurrently set to HGSS (Johto).")
			case 5:
				playbgm(MUS_HG_VS_GYM_LEADER_KANTO, FALSE)
				message("The Leviathan music is\ncurrently set to HGSS (Kanto).")
			case 6:
				playbgm(MUS_BW_VS_GYM_LEADER, FALSE)
				message("The Leviathan music is\ncurrently set to BW.")
		}
		dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "RSE", "FRLG", "DPPt", "HGSS (Johto)", "HGSS (Kanto)", "BW")
		switch (var(VAR_RESULT)) {
			case 0:
				setvar(VAR_LEVIATHAN_MUSIC, 1)
			case 1:
				setvar(VAR_LEVIATHAN_MUSIC, 2)
			case 2:
				setvar(VAR_LEVIATHAN_MUSIC, 3)
			case 3:
				setvar(VAR_LEVIATHAN_MUSIC, 4)
			case 4:
				setvar(VAR_LEVIATHAN_MUSIC, 5)
			case 5:
				setvar(VAR_LEVIATHAN_MUSIC, 6)
			case MULTI_B_PRESSED:
				return
		}
	}
}

mart Shop_Filler {
	ITEM_POKE_BALL
}

script EventScript_Shop_MartEmployee {
	lock
	faceplayer
	playbgm(MUS_POKE_MART, FALSE)
	if (flag(FLAG_TIM_INTRO) == false) {
		msgbox(format("Hey there! Welcome to the Poké Mart Stand.\pWe carry items that are typically sold in Poké Marts."), MSGBOX_DEFAULT)
		setflag(FLAG_TIM_INTRO)
	}
	message(format("Welcome to the Poké Mart Stand!"))
	waitmessage
	switch (var(VAR_ZONE)) {
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
			pokemart(Shop_Mart_1)
		case 6:
		case 7:
		case 9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 15:
			pokemart(Shop_Mart_3)
		case 16:
		case 17:
		case 18:
		case 20:
			pokemart(Shop_Mart_4)
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
			pokemart(Shop_Mart_5)
		case 26:
		case 27:
		case 28:
		case 29:
		case 30:
		case 31:
		case 32:
		case 33:
		case 34:
		case 35:
			pokemart(Shop_Mart_7)
		case 36:
		case 37:
		case 38:
		case 39:
		case 40:
			pokemart(Shop_Mart_8)
		case 41:
		case 42:
		case 43:
		case 44:
		case 45:
			pokemart(Shop_Mart_9)
	}
	msgbox("Please come again!")
	fadedefaultbgm
	release
}

mart Shop_Mart_1 {
	ITEM_POKE_BALL
	ITEM_POTION
	ITEM_ANTIDOTE
	ITEM_PARALYZE_HEAL
	ITEM_AWAKENING
	ITEM_BURN_HEAL
	ITEM_ICE_HEAL
}

mart Shop_Mart_3 {
	ITEM_POKE_BALL
	ITEM_GREAT_BALL
	ITEM_POTION
	ITEM_SUPER_POTION
	ITEM_REVIVE
	ITEM_ANTIDOTE
	ITEM_PARALYZE_HEAL
	ITEM_AWAKENING
	ITEM_BURN_HEAL
	ITEM_ICE_HEAL
}

mart Shop_Mart_4 {
	ITEM_POKE_BALL
	ITEM_GREAT_BALL
	ITEM_ULTRA_BALL
	ITEM_POTION
	ITEM_SUPER_POTION
	ITEM_HYPER_POTION
	ITEM_REVIVE
	ITEM_ANTIDOTE
	ITEM_PARALYZE_HEAL
	ITEM_AWAKENING
	ITEM_BURN_HEAL
	ITEM_ICE_HEAL
}

mart Shop_Mart_5 {
	ITEM_POKE_BALL
	ITEM_GREAT_BALL
	ITEM_ULTRA_BALL
	ITEM_POTION
	ITEM_SUPER_POTION
	ITEM_HYPER_POTION
	ITEM_REVIVE
	ITEM_ANTIDOTE
	ITEM_PARALYZE_HEAL
	ITEM_AWAKENING
	ITEM_BURN_HEAL
	ITEM_ICE_HEAL
	ITEM_FULL_HEAL
}

mart Shop_Mart_7 {
	ITEM_POKE_BALL
	ITEM_GREAT_BALL
	ITEM_ULTRA_BALL
	ITEM_POTION
	ITEM_SUPER_POTION
	ITEM_HYPER_POTION
	ITEM_MAX_POTION
	ITEM_REVIVE
	ITEM_ANTIDOTE
	ITEM_PARALYZE_HEAL
	ITEM_AWAKENING
	ITEM_BURN_HEAL
	ITEM_ICE_HEAL
	ITEM_FULL_HEAL
}

mart Shop_Mart_8 {
	ITEM_POKE_BALL
	ITEM_GREAT_BALL
	ITEM_ULTRA_BALL
	ITEM_POTION
	ITEM_SUPER_POTION
	ITEM_HYPER_POTION
	ITEM_MAX_POTION
	ITEM_FULL_RESTORE
	ITEM_REVIVE
	ITEM_ANTIDOTE
	ITEM_PARALYZE_HEAL
	ITEM_AWAKENING
	ITEM_BURN_HEAL
	ITEM_ICE_HEAL
	ITEM_FULL_HEAL
}

mart Shop_Mart_9 {
	ITEM_POKE_BALL
	ITEM_GREAT_BALL
	ITEM_ULTRA_BALL
	ITEM_POTION
	ITEM_SUPER_POTION
	ITEM_HYPER_POTION
	ITEM_MAX_POTION
	ITEM_FULL_RESTORE
	ITEM_MAX_REVIVE
	ITEM_ANTIDOTE
	ITEM_PARALYZE_HEAL
	ITEM_AWAKENING
	ITEM_BURN_HEAL
	ITEM_ICE_HEAL
	ITEM_FULL_HEAL
}

script EventScript_Shop_Varrick {
	lock
	faceplayer
	playbgm(MUS_DP_POKE_MART, FALSE)
	if (flag(FLAG_VARRICK_INTRO) == false) {
		setspeaker("???")
		msgbox(format("Wowza! Yeetastic! Blamo!\p"
				"My name is Varrick,\n"
				"entrepreneur extraordinaire!"))
		setspeaker("Varrick")
		msgbox(format(
				"I pitched this idea a couple year's back, and now it's become a reality!\p"
				"All the items you can or can't find in the world, you'll find here!\p"
				"Fantastic evolution stones!\p"
				"Powerful held items!\p"
				"All variety of Poké Balls!\p"
				"Witness the finest item collection you've ever seen!\p"
				"Please, enjoy my shop!"))
		setflag(FLAG_VARRICK_INTRO)
	}
	setspeaker("Varrick")
	message(format("Salutations! Welcome to Varrick's Extravagant Emporium!"))
	waitmessage
	call(EventScript_Shop_Varrick_Items)
	msgbox("A big thank you from me!")
	fadedefaultbgm
	release
}

script EventScript_Shop_Varrick_Items {
	while {
		dynmultipush("Poké Balls", 0)
		if (var(VAR_ZONE) > 5) {
			dynmultipush("Evo Items", 1)
			dynmultipush("Battle Items", 2)
		}
		dynmultipush("Treasures", 3)
		if (checkitem(ITEM_MEGA_RING) == TRUE) {
			dynmultipush("Mega Stones", 6)
		}
		if (var(VAR_ZONE) > 5) {
			dynmultipush("Other", 4)
		}
		dynmultipush("Exit", 7)
		dynmultistack(0, 0, FALSE, 5, FALSE, 0, DYN_MULTICHOICE_CB_NONE)
		switch (var(VAR_RESULT)) {
			case 0:
				call(EventScript_Shop_Varrick_Pokeballs)
			case 1:
				call(EventScript_Shop_Varrick_Evo)
			case 2:
				call(EventScript_Shop_Varrick_Battle)
			case 3:
				call(EventScript_Shop_Varrick_Treasures)
			case 4:
				call(EventScript_Shop_Varrick_Other)
			case 6:
				call(EventScript_Shop_Varrick_MegaStones)
			case 7:
			case MULTI_B_PRESSED:
				return
		}
		setspeaker("Varrick")
		msgbox(format("Want to have a look at anything else?"))
	}
}

script EventScript_Shop_Varrick_Pokeballs {
	setspeaker("Varrick")
	message(format("We sell a great variety of Poké Balls!"))
	waitmessage
	switch (var(VAR_ZONE)) {
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
			pokemart(Shop_Pokeballs_1)
		case 6:
		case 7:
		case 9:
		case 10:
			pokemart(Shop_Pokeballs_2)
		case 11:
		case 12:
		case 13:
		case 15:
			pokemart(Shop_Pokeballs_3)
		case 16:
		case 17:
		case 18:
		case 20:
			pokemart(Shop_Pokeballs_4)
		default:
			pokemart(Shop_Pokeballs_5)
	}
}

mart Shop_Pokeballs_1 {
	ITEM_HEAL_BALL
}

mart Shop_Pokeballs_2 {
	ITEM_HEAL_BALL
	ITEM_REPEAT_BALL
	ITEM_NEST_BALL
}

mart Shop_Pokeballs_3 {
	ITEM_HEAL_BALL
	ITEM_DIVE_BALL
	ITEM_NET_BALL
	ITEM_REPEAT_BALL
	ITEM_NEST_BALL
}

mart Shop_Pokeballs_4 {
	ITEM_HEAL_BALL
	ITEM_DIVE_BALL
	ITEM_NET_BALL
	ITEM_REPEAT_BALL
	ITEM_NEST_BALL
	ITEM_FAST_BALL
	ITEM_LEVEL_BALL
	ITEM_LURE_BALL
	ITEM_HEAVY_BALL
	ITEM_LOVE_BALL
	ITEM_MOON_BALL
}

mart Shop_Pokeballs_5 {
	ITEM_QUICK_BALL
	ITEM_DUSK_BALL
	ITEM_TIMER_BALL
	ITEM_HEAL_BALL
	ITEM_DIVE_BALL
	ITEM_NET_BALL
	ITEM_REPEAT_BALL
	ITEM_NEST_BALL
	ITEM_FAST_BALL
	ITEM_LEVEL_BALL
	ITEM_LURE_BALL
	ITEM_HEAVY_BALL
	ITEM_LOVE_BALL
	ITEM_MOON_BALL
}

script EventScript_Shop_Varrick_Evo {
	setspeaker("Varrick")
	message(format("All the evolution items you might need, you'll find here!"))
	waitmessage
	switch (var(VAR_ZONE)) {
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 9:
		case 10:
			pokemart(Shop_EvoSpecies_2)
		case 11:
		case 12:
		case 13:
		case 15:
			pokemart(Shop_EvoSpecies_3)
		default:
			pokemart(Shop_EvoSpecies_4)
	}
}

mart Shop_EvoSpecies_2 {
	ITEM_UPGRADE
	ITEM_DEEP_SEA_SCALE
	ITEM_DEEP_SEA_TOOTH
	ITEM_OVAL_STONE
	ITEM_WHIPPED_DREAM
	ITEM_SACHET
	ITEM_STRAWBERRY_SWEET
}

mart Shop_EvoSpecies_3 {
	ITEM_FIRE_STONE
	ITEM_WATER_STONE
	ITEM_THUNDER_STONE
	ITEM_LEAF_STONE
	ITEM_MOON_STONE
	ITEM_SUN_STONE
	ITEM_ICE_STONE
	ITEM_UPGRADE
	ITEM_DEEP_SEA_SCALE
	ITEM_DEEP_SEA_TOOTH
	ITEM_OVAL_STONE
	ITEM_WHIPPED_DREAM
	ITEM_SACHET
	ITEM_STRAWBERRY_SWEET
}

mart Shop_EvoSpecies_4 {
	ITEM_LINKING_CORD
	ITEM_FIRE_STONE
	ITEM_WATER_STONE
	ITEM_THUNDER_STONE
	ITEM_LEAF_STONE
	ITEM_MOON_STONE
	ITEM_SUN_STONE
	ITEM_ICE_STONE
	ITEM_DUSK_STONE
	ITEM_SHINY_STONE
	ITEM_DAWN_STONE
	ITEM_AUSPICIOUS_ARMOR
	ITEM_MALICIOUS_ARMOR
	ITEM_BLACK_AUGURITE
	ITEM_CHIPPED_POT
	ITEM_MASTERPIECE_TEACUP
	ITEM_GALARICA_CUFF
	ITEM_GALARICA_WREATH
	ITEM_SWEET_APPLE
	ITEM_TART_APPLE
	ITEM_SYRUPY_APPLE
	ITEM_DRAGON_SCALE
	ITEM_DUBIOUS_DISC
	ITEM_ELECTIRIZER
	ITEM_MAGMARIZER
	ITEM_KINGS_ROCK
	ITEM_METAL_COAT
	ITEM_METAL_ALLOY
	ITEM_PEAT_BLOCK
	ITEM_PRISM_SCALE
	ITEM_PROTECTOR
	ITEM_RAZOR_CLAW
	ITEM_RAZOR_FANG
	ITEM_REAPER_CLOTH
	ITEM_UPGRADE
	ITEM_DEEP_SEA_SCALE
	ITEM_DEEP_SEA_TOOTH
	ITEM_OVAL_STONE
	ITEM_WHIPPED_DREAM
	ITEM_SACHET
	ITEM_STRAWBERRY_SWEET
}

script EventScript_Shop_Varrick_Battle {
	setspeaker("Varrick")
	message(format("There are tons of Battle Items, and you can find all of them here!"))
	waitmessage
	switch (var(VAR_ZONE)) {
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 9:
		case 10:
			pokemart(Shop_Battle_2)
		case 11:
		case 12:
		case 13:
		case 15:
			// pokemart(Shop_Battle_3)
		case 16:
		case 17:
		case 18:
		case 20:
			// pokemart(Shop_Battle_4)
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
			// pokemart(Shop_Battle_5)
		case 26:
			pokemart(Shop_Filler)
	}
}

mart Shop_Battle_2 {
	// X Items
	ITEM_X_ATTACK
	ITEM_X_DEFENSE
	ITEM_X_SP_ATK
	ITEM_X_SP_DEF
	ITEM_X_SPEED
	ITEM_X_ACCURACY
	ITEM_DIRE_HIT
	ITEM_GUARD_SPEC
	ITEM_POKE_DOLL
	// Type boosting items
	ITEM_SILK_SCARF
	// ITEM_CHARCOAL
	// ITEM_MYSTIC_WATER
	// ITEM_MAGNET
	ITEM_MIRACLE_SEED
	// ITEM_NEVER_MELT_ICE
	// ITEM_BLACK_BELT
	ITEM_POISON_BARB
	// ITEM_SOFT_SAND
	// ITEM_SHARP_BEAK
	ITEM_TWISTED_SPOON
	ITEM_SILVER_POWDER
	// ITEM_HARD_STONE
	// ITEM_SPELL_TAG
	// ITEM_DRAGON_FANG
	// ITEM_BLACK_GLASSES
	// ITEM_METAL_COAT
	// ITEM_FAIRY_FEATHER

// #define ITEM_FLAME_PLATE
// ITEM_SPLASH_PLATE
// ITEM_ZAP_PLATE
// ITEM_MEADOW_PLATE
// ITEM_ICICLE_PLATE
// ITEM_FIST_PLATE
// ITEM_TOXIC_PLATE
// ITEM_EARTH_PLATE
// ITEM_SKY_PLATE
// ITEM_MIND_PLATE
// ITEM_INSECT_PLATE
// ITEM_STONE_PLATE
// ITEM_SPOOKY_PLATE
// ITEM_DRACO_PLATE
// ITEM_DREAD_PLATE
// ITEM_IRON_PLATE
// ITEM_PIXIE_PLATE 
// ITEM_NORMAL_GEM
// ITEM_FIRE_GEM
// ITEM_WATER_GEM
// ITEM_ELECTRIC_GEM
// ITEM_GRASS_GEM
// ITEM_ICE_GEM
// ITEM_FIGHTING_GEM
// ITEM_POISON_GEM
// ITEM_GROUND_GEM
// ITEM_FLYING_GEM
// ITEM_PSYCHIC_GEM
// ITEM_BUG_GEM
// ITEM_ROCK_GEM
// ITEM_GHOST_GEM
// ITEM_DRAGON_GEM
// ITEM_DARK_GEM
// ITEM_STEEL_GEM
// ITEM_FAIRY_GEM

// ITEM_CHOICE_BAND
// ITEM_CHOICE_SPECS
// ITEM_CHOICE_SCARF

// ITEM_FLAME_ORB
// ITEM_TOXIC_ORB 446

// ITEM_DAMP_ROCK
// ITEM_HEAT_ROCK
// ITEM_SMOOTH_ROCK
// ITEM_ICY_ROCK

// ITEM_ELECTRIC_SEED
// ITEM_PSYCHIC_SEED
// ITEM_MISTY_SEED
// ITEM_GRASSY_SEED

// Type-activated Stat Modif
// ITEM_ABSORB_BULB
// ITEM_CELL_BATTERY
// ITEM_LUMINOUS_MOSS
// ITEM_SNOWBALL 
// ITEM_BRIGHT_POWDER
// ITEM_BRIGHTPOWDER ITEM_BRIGHT_POWDER // Pre-Gen VI 
// ITEM_WHITE_HERB 
// ITEM_QUICK_CLAW 
// ITEM_MENTAL_HERB
// ITEM_KINGS_ROCK
// ITEM_AMULET_COIN
// ITEM_CLEANSE_TAG
// ITEM_SMOKE_BALL
// ITEM_FOCUS_BAND
// ITEM_LUCKY_EGG
// ITEM_SCOPE_LENS
// ITEM_LEFTOVERS
// ITEM_SHELL_BELL
// ITEM_WIDE_LENS
// ITEM_MUSCLE_BAND
// ITEM_WISE_GLASSES
// ITEM_EXPERT_BELT
// ITEM_LIGHT_CLAY
// ITEM_LIFE_ORB
// ITEM_POWER_HERB
// ITEM_FOCUS_SASH
// ITEM_ZOOM_LENS
// ITEM_METRONOME
// ITEM_IRON_BALL
// ITEM_LAGGING_TAIL
// ITEM_DESTINY_KNOT
// ITEM_BLACK_SLUDGE
// ITEM_GRIP_CLAW
// ITEM_STICKY_BARB
// ITEM_SHED_SHELL
// ITEM_BIG_ROOT
// ITEM_RAZOR_CLAW
// ITEM_RAZOR_FANG
// ITEM_EVIOLITE
// ITEM_FLOAT_STONE
// ITEM_ROCKY_HELMET
// ITEM_AIR_BALLOON
// ITEM_RED_CARD
// ITEM_RING_TARGET
// ITEM_BINDING_BAND
// ITEM_EJECT_BUTTON
// ITEM_WEAKNESS_POLICY
// ITEM_ASSAULT_VEST
// ITEM_SAFETY_GOGGLES
// ITEM_ADRENALINE_ORB
// ITEM_TERRAIN_EXTENDER
// ITEM_PROTECTIVE_PADS
// ITEM_THROAT_SPRAY
// ITEM_EJECT_PACK
// ITEM_HEAVY_DUTY_BOOTS
// ITEM_BLUNDER_POLICY
// ITEM_ROOM_SERVICE
// ITEM_UTILITY_UMBRELLA
// ITEM_ABILITY_SHIELD
// ITEM_CLEAR_AMULET
// ITEM_PUNCHING_GLOVE
// ITEM_COVERT_CLOAK
// ITEM_LOADED_DICE
// ITEM_BOOSTER_ENERGY
// ITEM_MIRROR_HERB
}

script EventScript_Shop_Varrick_Treasures {
	setspeaker("Varrick")
	message(format("Treasures for you!"))
	waitmessage
	switch (var(VAR_ZONE)) {
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
			pokemart(Shop_Treasures_1)
		case 6:
		case 7:
		case 9:
		case 10:
			pokemart(Shop_Treasures_2)
		case 11:
		case 12:
		case 13:
		case 15:
			pokemart(Shop_Treasures_3)
		case 16:
		case 17:
		case 18:
		case 20:
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
			pokemart(Shop_Treasures_5)
		default:
			pokemart(Shop_Treasures_6)
	}
}

mart Shop_Treasures_1 {
	ITEM_HEART_SCALE
}

mart Shop_Treasures_2 {
	ITEM_HEART_SCALE
	ITEM_RED_SHARD
	ITEM_BLUE_SHARD
	ITEM_YELLOW_SHARD
	ITEM_GREEN_SHARD
}

mart Shop_Treasures_3 {
	ITEM_HEART_SCALE
	ITEM_RED_SHARD
	ITEM_BLUE_SHARD
	ITEM_YELLOW_SHARD
	ITEM_GREEN_SHARD
	ITEM_BOTTLE_CAP
}

mart Shop_Treasures_5 {
	ITEM_HEART_SCALE
	ITEM_RED_SHARD
	ITEM_BLUE_SHARD
	ITEM_YELLOW_SHARD
	ITEM_GREEN_SHARD
	ITEM_GOLD_BOTTLE_CAP
}

mart Shop_Treasures_6 {
	ITEM_HEART_SCALE
	ITEM_RED_SHARD
	ITEM_BLUE_SHARD
	ITEM_YELLOW_SHARD
	ITEM_GREEN_SHARD
	ITEM_GOLD_BOTTLE_CAP
	#define ITEM_BUG_TERA_SHARD 774
	#define ITEM_DARK_TERA_SHARD 775
	#define ITEM_DRAGON_TERA_SHARD 776
	#define ITEM_ELECTRIC_TERA_SHARD 777
	#define ITEM_FAIRY_TERA_SHARD 778
	#define ITEM_FIGHTING_TERA_SHARD 779
	#define ITEM_FIRE_TERA_SHARD 780
	#define ITEM_FLYING_TERA_SHARD 781
	#define ITEM_GHOST_TERA_SHARD 782
	#define ITEM_GRASS_TERA_SHARD 783
	#define ITEM_GROUND_TERA_SHARD 784
	#define ITEM_ICE_TERA_SHARD 785
	#define ITEM_NORMAL_TERA_SHARD 786
	#define ITEM_POISON_TERA_SHARD 787
	#define ITEM_PSYCHIC_TERA_SHARD 788
	#define ITEM_ROCK_TERA_SHARD 789
	#define ITEM_STEEL_TERA_SHARD 790
	#define ITEM_WATER_TERA_SHARD 791
}

script EventScript_Shop_Varrick_Other {
	setspeaker("Varrick")
	message(format("Everything else that I sell, you can find here!"))
	waitmessage
	switch (var(VAR_ZONE)) {
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 9:
		case 10:
			pokemart(Shop_Other_2)
		case 11:
		case 12:
		case 13:
		case 15:
			// pokemart(Shop_Other_3)
		case 16:
		case 17:
		case 18:
		case 20:
			// pokemart(Shop_Other_4)
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
			// pokemart(Shop_Other_5)
		case 26:
			pokemart(Shop_Filler)
	}
}

mart Shop_Other_2 {
	ITEM_RED_NECTAR
	ITEM_YELLOW_NECTAR
	ITEM_PINK_NECTAR
	ITEM_PURPLE_NECTAR
	ITEM_LIGHT_BALL
	ITEM_LEEK
	ITEM_THICK_CLUB
	ITEM_LUCKY_PUNCH
	ITEM_METAL_POWDER
	ITEM_QUICK_POWDER
#define ITEM_FIRE_MEMORY 271
#define ITEM_WATER_MEMORY 272
#define ITEM_ELECTRIC_MEMORY 273
#define ITEM_GRASS_MEMORY 274
#define ITEM_ICE_MEMORY 275
#define ITEM_FIGHTING_MEMORY 276
#define ITEM_POISON_MEMORY 277
#define ITEM_GROUND_MEMORY 278
#define ITEM_FLYING_MEMORY 279
#define ITEM_PSYCHIC_MEMORY 280
#define ITEM_BUG_MEMORY 281
#define ITEM_ROCK_MEMORY 282
#define ITEM_GHOST_MEMORY 283
#define ITEM_DRAGON_MEMORY 284
#define ITEM_DARK_MEMORY 285
#define ITEM_STEEL_MEMORY 286
#define ITEM_FAIRY_MEMORY 287
}

script EventScript_Shop_Varrick_MegaStones {
	setspeaker("Varrick")
	message(format("In case you're missing some Mega Stones, you can buy them here!"))
	waitmessage
	switch (var(VAR_ZONE)) {
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 15:
		case 16:
		case 17:
		case 18:
		case 20:
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
			pokemart(Shop_Filler)
		case 26:
			pokemart(Shop_Mega_6)
		default:
			pokemart(Shop_Filler)
	}
}

mart Shop_Mega_6 {
	ITEM_EXP_CANDY_XS
#define ITEM_VENUSAURITE 292
#define ITEM_CHARIZARDITE_X 293
#define ITEM_CHARIZARDITE_Y 294
#define ITEM_BLASTOISINITE 295
#define ITEM_BEEDRILLITE 296
#define ITEM_PIDGEOTITE 297
#define ITEM_ALAKAZITE 298
#define ITEM_SLOWBRONITE 299
#define ITEM_GENGARITE 300
#define ITEM_KANGASKHANITE 301
#define ITEM_PINSIRITE 302
#define ITEM_GYARADOSITE 303
#define ITEM_AERODACTYLITE 304
#define ITEM_MEWTWONITE_X 305
#define ITEM_MEWTWONITE_Y 306
#define ITEM_AMPHAROSITE 307
#define ITEM_STEELIXITE 308
#define ITEM_SCIZORITE 309
#define ITEM_HERACRONITE 310
#define ITEM_HOUNDOOMINITE 311
#define ITEM_TYRANITARITE 312
#define ITEM_SCEPTILITE 313
#define ITEM_BLAZIKENITE 314
#define ITEM_SWAMPERTITE 315
#define ITEM_GARDEVOIRITE 316
#define ITEM_SABLENITE 317
#define ITEM_MAWILITE 318
#define ITEM_AGGRONITE 319
#define ITEM_MEDICHAMITE 320
#define ITEM_MANECTITE 321
#define ITEM_SHARPEDONITE 322
#define ITEM_CAMERUPTITE 323
#define ITEM_ALTARIANITE 324
#define ITEM_BANETTITE 325
#define ITEM_ABSOLITE 326
#define ITEM_GLALITITE 327
#define ITEM_SALAMENCITE 328
#define ITEM_METAGROSSITE 329
#define ITEM_LATIASITE 330
#define ITEM_LATIOSITE 331
#define ITEM_LOPUNNITE 332
#define ITEM_GARCHOMPITE 333
#define ITEM_LUCARIONITE 334
#define ITEM_ABOMASITE 335
#define ITEM_GALLADITE 336
#define ITEM_AUDINITE 337
#define ITEM_DIANCITE 338
}

script EventScript_Shop_Marie {
	lock
	faceplayer
	// if (flag(FLAG_MARIE_INTRO) == false) {
	// 	msgbox(format("{COLOR BLUE}???{COLOR DARK_GRAY}: Hi. My name is Marie, and welcome to my shop.\p"
	// 			"You're probably wondering what this shop is even for.\p"
	// 			"Let me explain: lots of trainers leave extra eggs at the Daycare.\p"
	// 			"Some trainers mix up which egg has which species of Pokémon.\p"
	// 			"It's my job to help match these eggs with the right trainer.\p"
	// 			"Maybe you'll be able to make your next friend here!"), MSGBOX_DEFAULT)
	// 	setflag(FLAG_MARIE_INTRO)
	// }
	call(EventScript_Shop_Marie_MainMenu)
	msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Au revoir!"))
	release
}

script EventScript_Shop_Marie_MainMenu {
	message(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Hi. Are you ready to meet your next friend?"))
	waitmessage
	dynmultichoice(0, 0, FALSE, 3, 0, DYN_MULTICHOICE_CB_NONE, "Eggs", "Info", "Exit")
	switch(var(VAR_RESULT)) {
		case 0:
			if (flag(FLAG_SETTINGS_NUZLOCKE) && flag(FLAG_MARIE_NUZLOCKE_RECEIVED))
			{
				msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: You've already received an Egg from our services. On Nuzlocke mode, you can only get one Egg."))
				return
			}
			if (var(VAR_ZONE) <= 5) {
				msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: I actually don't have any Eggs at the moment.\pCome back again another time!"), MSGBOX_DEFAULT)
				return
			}
			message(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Which type of Egg would you like?"))
			waitmessage
			if (var(VAR_ZONE) > 5) {
				dynmultipush("Elemental Monkey - ¥1000", 0)
			}
			if (var(VAR_ZONE) > 10) {
				dynmultipush("Regional Form - ¥3000", 1)
			}
			if (var(VAR_ZONE) > 10) {
				dynmultipush("Baby Pokémon 1 - ¥3000", 2)
			}
			if (var(VAR_ZONE) > 25) {
				dynmultipush("Baby Pokémon 2 - ¥10000", 3)
			}
			if (var(VAR_ZONE) > 30) {
				dynmultipush("Kanto Starter - ¥10000", 4)
				dynmultipush("Johto Starter - ¥10000", 5)
				dynmultipush("Hoenn Starter - ¥10000", 6)
				dynmultipush("Sinnoh Starter - ¥10000", 7)
				dynmultipush("Unova Starter - ¥10000", 8)
				dynmultipush("Kalos Starter - ¥10000", 9)
				dynmultipush("Alola Starter - ¥10000", 10)
				dynmultipush("Galar Starter - ¥10000", 11)
				dynmultipush("Paldea Starter - ¥10000", 12)
			}
			dynmultipush("Back", 13)
			dynmultistack(21, 0, FALSE, 6, FALSE, 0, DYN_MULTICHOICE_CB_NONE)
			switch (var(VAR_RESULT)) {
				case 0:
					showmoneybox(0, 0)
					msgbox(format("An egg that contains Pansage, Pansear, or Panpour will cost ¥1000."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == YES) {
						call(EventScript_Shop_Marie_ElementalMonkeyEgg)
					}
					hidemoneybox
					return
				case 1:
					showmoneybox(0, 0)
					msgbox(format("An egg that contains Alolan Meowth, Galarian Zigzagoon, Hisuian Voltorb, or Paldean Wooper will cost ¥3000."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == YES) {
						call(EventScript_Shop_Marie_RegionalFormEgg)
					}
					hidemoneybox
					return
				case 2:
					showmoneybox(0, 0)
					msgbox(format("An egg that contains Smoochum, Elekid, or Magby will cost ¥3000."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == YES) {
						call(EventScript_Shop_Marie_BabyPokemon1Egg)
					}
					hidemoneybox
					return
				case 3:
					showmoneybox(0, 0)
					msgbox(format("An egg that contains Happiny, Togepi, Munchlax, or Riolu will cost ¥10000."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == YES) {
						call(EventScript_Shop_Marie_BabyPokemon2Egg)
					}
					hidemoneybox
					return
				case 13:
				case MULTI_B_PRESSED:
					call(EventScript_Shop_Marie_MainMenu)
			}
		case 1:
			msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Here at Marie's Egg Delivery Service, we pair trainers with mixed up Pokémon Eggs.\pEach set of eggs contains a limited number of possible species of Pokémon.\pYou'll know the possibilities of what the egg will hatch into, but you won't know what Pokémon you have until it hatches."), MSGBOX_DEFAULT)
			if (flag(FLAG_SETTINGS_NUZLOCKE)) {
				msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: On Nuzlocke mode, you can only obtain one Egg in total."), MSGBOX_DEFAULT)
			}
			call(EventScript_Shop_Marie_MainMenu)
	}
}

script EventScript_Shop_Marie_ElementalMonkeyEgg {
	checkmoney(1000, 0)
	if (var(VAR_RESULT) == FALSE) {
		msgbox("{COLOR BLUE}Marie{COLOR DARK_GRAY}: You don't have enough money.")
		hidemoneybox
		return
	}
	specialvar(VAR_TEMP_2, CalculatePlayerPartyCount)
	if (var(VAR_TEMP_2) == PARTY_SIZE) {
		msgbox(format("Your party is full. Choose a Pokémon to send to the PC."), MSGBOX_AUTOCLOSE)
		hidemoneybox
		special(ChoosePartyMon)
		waitstate
		faceplayer
		showmoneybox(0, 0, 0)
		if (var(VAR_0x8004) == PARTY_NOTHING_CHOSEN) {
			hidemoneybox
			return
		}
		specialvar(VAR_TEMP_3, ScriptGetPartyMonSpecies)
		bufferspeciesname(2, VAR_TEMP_3)
		copyvar(VAR_TEMP_3, VAR_0x8004) // used in SendChosenMonToPC
		msgbox(format("Are you sure you want to send your {STR_VAR_3} to the PC?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == NO) {
			hidemoneybox
			return
		}
	}
	if (flag(FLAG_SETTINGS_NUZLOCKE) == true) {
		setflag(FLAG_MARIE_NUZLOCKE_RECEIVED)
	}
	if (var(VAR_TEMP_2) == PARTY_SIZE) {
		special(SendChosenMonToPC)
		setvar(VAR_TEMP_2, 5) // gift mon appears always in last slot if party initially full
	}
	removemoney(1000)
	updatemoneybox
	msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Thank you very much…"), MSGBOX_DEFAULT)
	hidemoneybox
	random(3)
	switch (var(VAR_RESULT)) {
		case 0:
			setvar(VAR_TEMP_1, SPECIES_PANSAGE)
		case 1:
			setvar(VAR_TEMP_1, SPECIES_PANSEAR)
		case 2:
			setvar(VAR_TEMP_1, SPECIES_PANPOUR)
	}
	giveegg(VAR_TEMP_1)
	setmonmetlocation(VAR_TEMP_2, 244)
	msgbox("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Here's your Egg.", MSGBOX_DEFAULT)
	playfanfare(MUS_OBTAIN_ITEM)
	message(format("{PLAYER} received the Egg!"))
	waitmessage
	waitfanfare
}

script EventScript_Shop_Marie_RegionalFormEgg {
	checkmoney(3000, 0)
	if (var(VAR_RESULT) == FALSE) {
		msgbox("{COLOR BLUE}Marie{COLOR DARK_GRAY}: You don't have enough money.")
		hidemoneybox
		return
	}
	specialvar(VAR_TEMP_2, CalculatePlayerPartyCount)
	if (var(VAR_TEMP_2) == PARTY_SIZE) {
		msgbox(format("Your party is full. Choose a Pokémon to send to the PC."), MSGBOX_AUTOCLOSE)
		hidemoneybox
		special(ChoosePartyMon)
		waitstate
		faceplayer
		showmoneybox(0, 0, 0)
		if (var(VAR_0x8004) == PARTY_NOTHING_CHOSEN) {
			hidemoneybox
			return
		}
		specialvar(VAR_TEMP_3, ScriptGetPartyMonSpecies)
		bufferspeciesname(2, VAR_TEMP_3)
		copyvar(VAR_TEMP_3, VAR_0x8004) // used in SendChosenMonToPC
		msgbox(format("Are you sure you want to send your {STR_VAR_3} to the PC?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == NO) {
			hidemoneybox
			return
		}
	}
	if (flag(FLAG_SETTINGS_NUZLOCKE) == true) {
		setflag(FLAG_MARIE_NUZLOCKE_RECEIVED)
	}
	if (var(VAR_TEMP_2) == PARTY_SIZE) {
		special(SendChosenMonToPC)
		setvar(VAR_TEMP_2, 5) // gift mon appears always in last slot if party initially full
	}
	removemoney(3000)
	updatemoneybox
	msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Thank you very much…"), MSGBOX_DEFAULT)
	hidemoneybox
	random(4)
	switch (var(VAR_RESULT)) {
		case 0:
			setvar(VAR_TEMP_1, SPECIES_MEOWTH_ALOLA)
		case 1:
			setvar(VAR_TEMP_1, SPECIES_ZIGZAGOON_GALAR)
		case 2:
			setvar(VAR_TEMP_1, SPECIES_VOLTORB_HISUI)
		case 3:
			setvar(VAR_TEMP_1, SPECIES_WOOPER_PALDEA)
	}
	giveegg(VAR_TEMP_1)
	setmonmetlocation(VAR_TEMP_2, 244)
	msgbox("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Here's your Egg.", MSGBOX_DEFAULT)
	playfanfare(MUS_OBTAIN_ITEM)
	message(format("{PLAYER} received the Egg!"))
	waitmessage
	waitfanfare
}

script EventScript_Shop_Marie_BabyPokemon1Egg {
	checkmoney(3000, 0)
	if (var(VAR_RESULT) == FALSE) {
		msgbox("{COLOR BLUE}Marie{COLOR DARK_GRAY}: You don't have enough money.")
		hidemoneybox
		return
	}
	specialvar(VAR_TEMP_2, CalculatePlayerPartyCount)
	if (var(VAR_TEMP_2) == PARTY_SIZE) {
		msgbox(format("Your party is full. Choose a Pokémon to send to the PC."), MSGBOX_AUTOCLOSE)
		hidemoneybox
		special(ChoosePartyMon)
		waitstate
		faceplayer
		showmoneybox(0, 0, 0)
		if (var(VAR_0x8004) == PARTY_NOTHING_CHOSEN) {
			hidemoneybox
			return
		}
		specialvar(VAR_TEMP_3, ScriptGetPartyMonSpecies)
		bufferspeciesname(2, VAR_TEMP_3)
		copyvar(VAR_TEMP_3, VAR_0x8004) // used in SendChosenMonToPC
		msgbox(format("Are you sure you want to send your {STR_VAR_3} to the PC?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == NO) {
			hidemoneybox
			return
		}
	}
	if (flag(FLAG_SETTINGS_NUZLOCKE) == true) {
		setflag(FLAG_MARIE_NUZLOCKE_RECEIVED)
	}
	if (var(VAR_TEMP_2) == PARTY_SIZE) {
		special(SendChosenMonToPC)
		setvar(VAR_TEMP_2, 5) // gift mon appears always in last slot if party initially full
	}
	removemoney(3000)
	updatemoneybox
	msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Thank you very much…"), MSGBOX_DEFAULT)
	hidemoneybox
	random(3)
	switch (var(VAR_RESULT)) {
		case 0:
			setvar(VAR_TEMP_1, SPECIES_SMOOCHUM)
		case 1:
			setvar(VAR_TEMP_1, SPECIES_ELEKID)
		case 2:
			setvar(VAR_TEMP_1, SPECIES_MAGBY)
	}
	giveegg(VAR_TEMP_1)
	setmonmetlocation(VAR_TEMP_2, 244)
	msgbox("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Here's your Egg.", MSGBOX_DEFAULT)
	playfanfare(MUS_OBTAIN_ITEM)
	message(format("{PLAYER} received the Egg!"))
	waitmessage
	waitfanfare
}

script EventScript_Shop_Marie_BabyPokemon2Egg {
	checkmoney(10000, 0)
	if (var(VAR_RESULT) == FALSE) {
		msgbox("{COLOR BLUE}Marie{COLOR DARK_GRAY}: You don't have enough money.")
		hidemoneybox
		return
	}
	specialvar(VAR_TEMP_2, CalculatePlayerPartyCount)
	if (var(VAR_TEMP_2) == PARTY_SIZE) {
		msgbox(format("Your party is full. Choose a Pokémon to send to the PC."), MSGBOX_AUTOCLOSE)
		hidemoneybox
		special(ChoosePartyMon)
		waitstate
		faceplayer
		showmoneybox(0, 0, 0)
		if (var(VAR_0x8004) == PARTY_NOTHING_CHOSEN) {
			hidemoneybox
			return
		}
		specialvar(VAR_TEMP_3, ScriptGetPartyMonSpecies)
		bufferspeciesname(2, VAR_TEMP_3)
		copyvar(VAR_TEMP_3, VAR_0x8004) // used in SendChosenMonToPC
		msgbox(format("Are you sure you want to send your {STR_VAR_3} to the PC?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == NO) {
			hidemoneybox
			return
		}
	}
	if (flag(FLAG_SETTINGS_NUZLOCKE) == true) {
		setflag(FLAG_MARIE_NUZLOCKE_RECEIVED)
	}
	if (var(VAR_TEMP_2) == PARTY_SIZE) {
		special(SendChosenMonToPC)
		setvar(VAR_TEMP_2, 5) // gift mon appears always in last slot if party initially full
	}
	removemoney(10000)
	updatemoneybox
	msgbox(format("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Thank you very much…"), MSGBOX_DEFAULT)
	hidemoneybox
	random(4)
	switch (var(VAR_RESULT)) {
		case 0:
			setvar(VAR_TEMP_1, SPECIES_HAPPINY)
		case 1:
			setvar(VAR_TEMP_1, SPECIES_TOGEPI)
		case 2:
			setvar(VAR_TEMP_1, SPECIES_MUNCHLAX)
		case 3:
			setvar(VAR_TEMP_1, SPECIES_RIOLU)
	}
	giveegg(VAR_TEMP_1)
	setmonmetlocation(VAR_TEMP_2, 244)
	msgbox("{COLOR BLUE}Marie{COLOR DARK_GRAY}: Here's your Egg.", MSGBOX_DEFAULT)
	playfanfare(MUS_OBTAIN_ITEM)
	message(format("{PLAYER} received the Egg!"))
	waitmessage
	waitfanfare
}

script EventScript_Shop_Lelouch {
	lock
	faceplayer
	if (flag(FLAG_LELOUCH_INTRO) == false) {
		setspeaker("???")
		msgbox("You… What is your name?\pCurious…\nThat's a funny name…", MSGBOX_AUTOCLOSE)
		delay(16)
		setspeaker("???")
		msgbox(format("You may call me Lelouch."))
		setspeaker("Lelouch")
		msgbox(format("I provide a variety of services to improve one's Pokémon.\pBut I require special items in exchange for my services."))
		setflag(FLAG_LELOUCH_INTRO)
	}
	if (var(VAR_ZONE) <= 5) {
		setspeaker("Lelouch")
		msgbox(format("You… are not ready yet."))
		release
		end
	}
	setspeaker("Lelouch")
	message("For the right price…\nWelcome to Lelouch's Services Stand.")
	waitmessage
	call(EventScript_Shop_Lelouch_Services)
	msgbox("Farewell.")
	release
}

script EventScript_Shop_Lelouch_Services {
	while {
		setspeaker("Lelouch")
		if (var(VAR_ZONE) > 15) {
			dynmultipush("Move Reminder", 0)
		}
		if (var(VAR_ZONE) > 5) {
			dynmultipush("Move Tutor", 1)
		}
		dynmultipush("Exit", 3)
		dynmultistack(0, 0, FALSE, 6, 0, 0, DYN_MULTICHOICE_CB_NONE)
		switch (var(VAR_RESULT)) {
			case 0:
				call(EventScript_Shop_Lelouch_MoveReminder)
			case 1:
				call(EventScript_Shop_Lelouch_MoveTutor)
			case 3:
			case MULTI_B_PRESSED:
				return
		}
		setspeaker("Lelouch")
		message("Anything else for you?")
		waitmessage
	}
}

text gText_Lelouch_NotEnoughColor {
	"{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: You don't have any Shards\nof that color."
}

script EventScript_Shop_Lelouch_Training {
	checkitem(ITEM_RED_SHARD, 1)
	if (var(VAR_RESULT) == FALSE) {
		msgbox(gText_Lelouch_NotEnoughColor)
		return
	}
	msgbox("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: Choose which training\nregiment you would like.", MSGBOX_DEFAULT)
	dynmultipush("Experience Training", 0)
	if ((var(VAR_DIFFICULTY) >= DIFFICULTY_HARD) && var(VAR_ZONE) > 25) {
		dynmultipush("EV Training", 1)
	}
	dynmultipush("Exit", 2)
	dynmultistack(0, 0, FALSE, 6, FALSE, 0, DYN_MULTICHOICE_CB_NONE)
	switch(var(VAR_RESULT)) {
		case 0:
			msgbox(gText_Lelouch_Exp, MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				// special(ChoosePartyMonForTraining) // TODO
				waitstate
				if (var(VAR_0x8004) == 1) {
					msgbox(gText_Lelouch_ExpTrainingFinished, MSGBOX_DEFAULT)
					msgbox(gText_Lelouch_PayItem, MSGBOX_DEFAULT)
					removeitem(ITEM_RED_SHARD, 1)
				} else {
					msgbox(gText_Lelouch_DidNotTrain)
				}
				return
			}
		case 1:
			msgbox(gText_Lelouch_EV, MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				special(ChoosePartyMon)
				waitstate
				if (var(VAR_0x8004) == PARTY_NOTHING_CHOSEN) {
					msgbox(gText_Lelouch_DidNotTrain, MSGBOX_DEFAULT)
				} else {
					specialvar(VAR_RESULT, ScriptGetPartyMonSpecies)
					if (var(VAR_RESULT) == SPECIES_EGG) {
						msgbox("I can't train an Egg!", MSGBOX_DEFAULT)
					} else {
						setvar(VAR_TEMP_F, 0)
						specialvar(VAR_TEMP_0, ScriptGetPartyMonSpecies)
						bufferspeciesname(0, VAR_TEMP_0)
						msgbox(gText_Lelouch_ChooseHPEV, MSGBOX_DEFAULT)
						dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "252", "200", "100", "4", "0", "Cancel")
						switch(var(VAR_RESULT)) {
							case 0:
								setvar(VAR_TEMP_9, 252)
								addvar(VAR_TEMP_F, 252)
							case 1:
								setvar(VAR_TEMP_9, 200)
								addvar(VAR_TEMP_F, 200)
							case 2:
								setvar(VAR_TEMP_9, 100)
								addvar(VAR_TEMP_F, 100)
							case 3:
								setvar(VAR_TEMP_9, 4)
								addvar(VAR_TEMP_F, 4)
							case 4:
								setvar(VAR_TEMP_9, 0)
							case 5:
							case MULTI_B_PRESSED:
								return
						}
						msgbox(gText_Lelouch_ChooseAttackEV, MSGBOX_DEFAULT)
						dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "252", "200", "100", "4", "0", "Cancel")
						switch(var(VAR_RESULT)) {
							case 0:
								setvar(VAR_TEMP_A, 252)
								addvar(VAR_TEMP_F, 252)
							case 1:
								setvar(VAR_TEMP_A, 200)
								addvar(VAR_TEMP_F, 200)
							case 2:
								setvar(VAR_TEMP_A, 100)
								addvar(VAR_TEMP_F, 100)
							case 3:
								setvar(VAR_TEMP_A, 4)
								addvar(VAR_TEMP_F, 4)
							case 4:
								setvar(VAR_TEMP_A, 0)
							case 5:
							case MULTI_B_PRESSED:
								return
						}
						msgbox(gText_Lelouch_ChooseDefenseEV, MSGBOX_DEFAULT)
						dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "252", "200", "100", "4", "0", "Cancel")
						switch(var(VAR_RESULT)) {
							case 0:
								setvar(VAR_TEMP_B, 252)
								addvar(VAR_TEMP_F, 252)
							case 1:
								setvar(VAR_TEMP_B, 200)
								addvar(VAR_TEMP_F, 200)
							case 2:
								setvar(VAR_TEMP_B, 100)
								addvar(VAR_TEMP_F, 100)
							case 3:
								setvar(VAR_TEMP_B, 4)
								addvar(VAR_TEMP_F, 4)
							case 4:
								setvar(VAR_TEMP_B, 0)
							case 5:
							case MULTI_B_PRESSED:
								return
						}
						msgbox(gText_Lelouch_ChooseSpecialAttackEV, MSGBOX_DEFAULT)
						dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "252", "200", "100", "4", "0", "Cancel")
						switch(var(VAR_RESULT)) {
							case 0:
								setvar(VAR_TEMP_C, 252)
								addvar(VAR_TEMP_F, 252)
							case 1:
								setvar(VAR_TEMP_C, 200)
								addvar(VAR_TEMP_F, 200)
							case 2:
								setvar(VAR_TEMP_C, 100)
								addvar(VAR_TEMP_F, 100)
							case 3:
								setvar(VAR_TEMP_C, 4)
								addvar(VAR_TEMP_F, 4)
							case 4:
								setvar(VAR_TEMP_C, 0)
							case 5:
							case MULTI_B_PRESSED:
								return
						}
						msgbox(gText_Lelouch_ChooseSpecialDefenseEV, MSGBOX_DEFAULT)
						dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "252", "200", "100", "4", "0", "Cancel")
						switch(var(VAR_RESULT)) {
							case 0:
								setvar(VAR_TEMP_D, 252)
								addvar(VAR_TEMP_F, 252)
							case 1:
								setvar(VAR_TEMP_D, 200)
								addvar(VAR_TEMP_F, 200)
							case 2:
								setvar(VAR_TEMP_D, 100)
								addvar(VAR_TEMP_F, 100)
							case 3:
								setvar(VAR_TEMP_D, 4)
								addvar(VAR_TEMP_F, 4)
							case 4:
								setvar(VAR_TEMP_D, 0)
							case 5:
							case MULTI_B_PRESSED:
								return
						}
						msgbox(gText_Lelouch_ChooseSpeedEV, MSGBOX_DEFAULT)
						dynmultichoice(0, 0, FALSE, 6, 0, DYN_MULTICHOICE_CB_NONE, "252", "200", "100", "4", "0", "Cancel")
						switch(var(VAR_RESULT)) {
							case 0:
								setvar(VAR_TEMP_E, 252)
								addvar(VAR_TEMP_F, 252)
							case 1:
								setvar(VAR_TEMP_E, 200)
								addvar(VAR_TEMP_F, 200)
							case 2:
								setvar(VAR_TEMP_E, 100)
								addvar(VAR_TEMP_F, 100)
							case 3:
								setvar(VAR_TEMP_E, 4)
								addvar(VAR_TEMP_F, 4)
							case 4:
								setvar(VAR_TEMP_E, 0)
							case 5:
							case MULTI_B_PRESSED:
								return
						}
						if (var(VAR_TEMP_F) > 510) {
							msgbox(gText_Lelouch_TooManyEVs, MSGBOX_DEFAULT)
							return
						}
						msgbox(gText_Lelouch_CheckEVs, MSGBOX_YESNO)
						if (var(VAR_RESULT) == NO) {
							return
						}
						special(CheckLeadMonCute) // Sets the EVs
						playse(SE_EXP_MAX)
						waitse
						msgbox(gText_Lelouch_ChangedEVs, MSGBOX_DEFAULT)
						msgbox(gText_Lelouch_PayItem, MSGBOX_DEFAULT)
						removeitem(ITEM_RED_SHARD, 1)
					}
				}
				return
			}
		case 2:
		case MULTI_B_PRESSED:
			return
	}
	return
}

text gText_Lelouch_EV {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: With EV Training, you can set one Pokémon's EVs at the cost of one Red Shard.\pWould you like to start an EV Training session?")
}

text gText_Lelouch_ChooseHPEV {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: What would you like your {STR_VAR_1}'s HP EV to be?")
}

text gText_Lelouch_ChooseAttackEV {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: What would you like your {STR_VAR_1}'s Attack EV to be?")
}

text gText_Lelouch_ChooseDefenseEV {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: What would you like your {STR_VAR_1}'s Defense EV to be?")
}

text gText_Lelouch_ChooseSpecialAttackEV {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: What would you like your {STR_VAR_1}'s Sp. Atk EV to be?")
}

text gText_Lelouch_ChooseSpecialDefenseEV {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: What would you like your {STR_VAR_1}'s Sp. Def EV to be?")
}

text gText_Lelouch_ChooseSpeedEV {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: What would you like your {STR_VAR_1}'s Speed EV to be?")
}

text gText_Lelouch_TooManyEVs {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: You've selected a total of EVs greater than 510. Pokémon can have at maximum 510 EVs.")
}

text gText_Lelouch_CheckEVs {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: Are you sure you wish to set {STR_VAR_1}'s EVs to these values?")
}

text gText_Lelouch_ChangedEVs {
	format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: I've changed your {STR_VAR_1}'s EVs to your requested values.")
}

script EventScript_Shop_Lelouch_MoveReminder {
	setspeaker("Lelouch")
	msgbox(format("Move Reminder services cost one Heart Scale.\pWould you like me to teach a forgotten move to your Pokémon?"), MSGBOX_YESNO)
	if (var(VAR_RESULT) == NO) {
		return
	}
	checkitem(ITEM_HEART_SCALE, 1)
	if (var(VAR_RESULT) == FALSE) {
		msgbox(format("You don't have any Heart Scales."))
		return
	}
	while {
		msgbox("Which Pokémon should\nrelearn a move?", MSGBOX_DEFAULT)
		special(ChooseMonForMoveRelearner)
		waitstate
		if (var(VAR_0x8004) == PARTY_NOTHING_CHOSEN) {
			return
		}
		special(IsSelectedMonEgg)
		if (var(VAR_RESULT) == TRUE) {
			msgbox("That is an Egg.", MSGBOX_DEFAULT)
			continue
		}
		if (var(VAR_0x8005) == 0) {
			msgbox("That Pokémon cannot\nrelearn any moves.", MSGBOX_DEFAULT)
			continue
		}
		msgbox("Which move should it\nrelearn?", MSGBOX_DEFAULT)
		special(TeachMoveRelearnerMove)
		waitstate
		if (var(VAR_0x8004) == 0) {
			continue
		}
		msgbox(format("{PLAYER} handed over 1 Heart Scale."))
		removeitem(ITEM_HEART_SCALE)
		break
	}
	return
}

script EventScript_Shop_Lelouch_Improvement {
	checkitem(ITEM_YELLOW_SHARD, 1)
	if (var(VAR_RESULT) == FALSE) {
		msgbox(gText_Lelouch_NotEnoughColor)
		return
	}
	msgbox("Filler text for EventScript_Shop_Lelouch_Improvement")
}

script EventScript_Shop_Lelouch_MoveTutor {
	while {
		setspeaker("Lelouch")
		message(format("Which move should I teach?"))
		waitmessage
		// --- Red Shard ---
		dynmultipush("Breaking Swipe - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_BREAKING_SWIPE)
		dynmultipush("Grassy Glide - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_GRASSY_GLIDE)
        dynmultipush("Low Sweep - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_LOW_SWEEP)
        dynmultipush("Steel Wing - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_STEEL_WING)
        dynmultipush("Electroweb - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_ELECTROWEB)

		if (var(VAR_ZONE) > 50) {
			dynmultipush("Rock Blast - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_ROCK_BLAST)
			dynmultipush("Pin Missile - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_PIN_MISSILE)
			dynmultipush("Icicle Spear - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_ICICLE_SPEAR)
			dynmultipush("Low Kick - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_LOW_KICK)
			dynmultipush("Air Slash - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_AIR_SLASH)
			dynmultipush("Burning Jealousy - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_BURNING_JEALOUSY)
			dynmultipush("Sucker Punch - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_SUCKER_PUNCH)
			dynmultipush("Rising Voltage - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_RISING_VOLTAGE)
			dynmultipush("Skitter Smack - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_SKITTER_SMACK)
			dynmultipush("Lash Out - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_LASH_OUT)
			dynmultipush("Temper Flare - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_TEMPER_FLARE)
			dynmultipush("Psychic Noise - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_PSYCHIC_NOISE)
			dynmultipush("Stomping Tantrum - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_STOMPING_TANTRUM)
			dynmultipush("Mystical Fire - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_MYSTICAL_FIRE)
			dynmultipush("Scale Shot - {COLOR RED}1 Red Shard{COLOR DARK_GRAY}", MOVE_SCALE_SHOT)
		}

        // --- Blue Shard ---
		if (var(VAR_ZONE) > 50) {
			dynmultipush("Ice Spinner - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_ICE_SPINNER)
			dynmultipush("Supercell Slam - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_SUPERCELL_SLAM)
			dynmultipush("Hex - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_HEX)
			dynmultipush("Knock Off - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_KNOCK_OFF)
			dynmultipush("Bounce - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_BOUNCE)
			dynmultipush("Drill Run - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_DRILL_RUN)
			dynmultipush("Lunge - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_LUNGE)
			dynmultipush("Alluring Voice - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_ALLURING_VOICE)
			dynmultipush("Throat Chop - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_THROAT_CHOP)
			dynmultipush("Dual Wingbeat - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_DUAL_WINGBEAT)
			dynmultipush("Seed Bomb - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_SEED_BOMB)
			dynmultipush("Dual Chop - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_DUAL_CHOP)
			dynmultipush("Iron Head - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_IRON_HEAD)
			dynmultipush("Zen Headbutt - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_ZEN_HEADBUTT)
			dynmultipush("Power Gem - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_POWER_GEM)
			dynmultipush("Body Slam - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_BODY_SLAM)
			dynmultipush("Expanding Force - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_EXPANDING_FORCE)
			dynmultipush("Darkest Lariat - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_DARKEST_LARIAT)
			dynmultipush("Liquidation - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_LIQUIDATION)
			dynmultipush("Icicle Crash - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_ICICLE_CRASH)
			dynmultipush("Psychic Fangs - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_PSYCHIC_FANGS)
			dynmultipush("Blaze Kick - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_BLAZE_KICK)
			dynmultipush("Play Rough - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_PLAY_ROUGH)
			dynmultipush("Pollen Puff - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_POLLEN_PUFF)
			dynmultipush("Phantom Force - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_PHANTOM_FORCE)
			dynmultipush("Bug Buzz - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_BUG_BUZZ)
			dynmultipush("Muddy Water - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_MUDDY_WATER)
			dynmultipush("Earth Power - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_EARTH_POWER)
			dynmultipush("Aqua Tail - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_AQUA_TAIL)
			dynmultipush("Foul Play - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_FOUL_PLAY)
			dynmultipush("Heat Wave - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_HEAT_WAVE)
			dynmultipush("Heavy Slam - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_HEAVY_SLAM)
			dynmultipush("Heat Crash - {COLOR BLUE}1 Blue Shard{COLOR DARK_GRAY}", MOVE_HEAT_CRASH)
		}

        // --- Yellow Shard ---
		if (var(VAR_ZONE) > 50) {
			dynmultipush("High Horsepower - 1 Yellow Shard", MOVE_HIGH_HORSEPOWER)
			dynmultipush("Future Sight - 1 Yellow Shard", MOVE_FUTURE_SIGHT)
			dynmultipush("Solar Blade - 1 Yellow Shard", MOVE_SOLAR_BLADE)
			dynmultipush("Misty Explosion - 1 Yellow Shard", MOVE_MISTY_EXPLOSION)
			dynmultipush("Hydro Pump - 1 Yellow Shard", MOVE_HYDRO_PUMP)
			dynmultipush("Poltergeist - 1 Yellow Shard", MOVE_POLTERGEIST)
			dynmultipush("Brave Bird - 1 Yellow Shard", MOVE_BRAVE_BIRD)
			dynmultipush("Flare Blitz - 1 Yellow Shard", MOVE_FLARE_BLITZ)
			dynmultipush("Close Combat - 1 Yellow Shard", MOVE_CLOSE_COMBAT)
			dynmultipush("Outrage - 1 Yellow Shard", MOVE_OUTRAGE)
			dynmultipush("Megahorn - 1 Yellow Shard", MOVE_MEGAHORN)
			dynmultipush("Gunk Shot - 1 Yellow Shard", MOVE_GUNK_SHOT)
			dynmultipush("Power Whip - 1 Yellow Shard", MOVE_POWER_WHIP)
			dynmultipush("Superpower - 1 Yellow Shard", MOVE_SUPERPOWER)
			dynmultipush("Leaf Storm - 1 Yellow Shard", MOVE_LEAF_STORM)
			dynmultipush("Draco Meteor - 1 Yellow Shard", MOVE_DRACO_METEOR)
			dynmultipush("Steel Beam - 1 Yellow Shard", MOVE_STEEL_BEAM)
			dynmultipush("Meteor Beam - 1 Yellow Shard", MOVE_METEOR_BEAM)
			dynmultipush("Giga Impact - 1 Yellow Shard", MOVE_GIGA_IMPACT)
			dynmultipush("Hyper Beam - 1 Yellow Shard", MOVE_HYPER_BEAM)
			dynmultipush("Focus Punch - 1 Yellow Shard", MOVE_FOCUS_PUNCH)
		}

        // --- Green Shard ---
        dynmultipush("Trick - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_TRICK)
        dynmultipush("Heal Bell - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_HEAL_BELL)
        dynmultipush("Helping Hand - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_HELPING_HAND)
        dynmultipush("Synthesis - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_SYNTHESIS)
        dynmultipush("Pain Split - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_PAIN_SPLIT)

		if (var(VAR_ZONE) > 50) {
			dynmultipush("Gravity - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_GRAVITY)
			dynmultipush("Psych Up - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_PSYCH_UP)
			dynmultipush("Coaching - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_COACHING)
			dynmultipush("Curse - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_CURSE)
			dynmultipush("Hone Claws - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_HONE_CLAWS)
			dynmultipush("Shell Smash - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_SHELL_SMASH)
			dynmultipush("Quiver Dance - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_QUIVER_DANCE)
			dynmultipush("Dragon Dance - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_DRAGON_DANCE)
			dynmultipush("Stealth Rock - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_STEALTH_ROCK)
			dynmultipush("Tailwind - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_TAILWIND)
			dynmultipush("Spikes - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_SPIKES)
			dynmultipush("Toxic Spikes - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_TOXIC_SPIKES)
			dynmultipush("Work Up - {COLOR GREEN}1 Green Shard{COLOR DARK_GRAY}", MOVE_WORK_UP)
		}

		dynmultipush("Exit", 0)
		dynmultistack(0, 0, FALSE, 5, FALSE, 1, DYN_MULTICHOICE_CB_NONE)
		switch (var(VAR_RESULT)) { // VAR_TEMP_1 is the number of Shards, VAR_TEMP_2 is the type of Shard
            case MOVE_BREAKING_SWIPE:
            case MOVE_GRASSY_GLIDE:
            case MOVE_LOW_SWEEP:
            case MOVE_STEEL_WING:
            case MOVE_ELECTROWEB:
            case MOVE_ROCK_BLAST:
            case MOVE_PIN_MISSILE:
            case MOVE_ICICLE_SPEAR:
            case MOVE_LOW_KICK:
            case MOVE_AIR_SLASH:
            case MOVE_BURNING_JEALOUSY:
            case MOVE_SUCKER_PUNCH:
            case MOVE_RISING_VOLTAGE:
            case MOVE_SKITTER_SMACK:
            case MOVE_LASH_OUT:
            case MOVE_TEMPER_FLARE:
            case MOVE_PSYCHIC_NOISE:
            case MOVE_STOMPING_TANTRUM:
            case MOVE_MYSTICAL_FIRE:
            case MOVE_SCALE_SHOT:
				copyvar(VAR_TEMP_3, VAR_RESULT)
                copyvar(VAR_TEMP_0, VAR_TEMP_3)
                copyvar(VAR_0x8005, VAR_TEMP_3)
                setvar(VAR_TEMP_1, 1)
                setvar(VAR_TEMP_2, ITEM_RED_SHARD)
            case MOVE_ICE_SPINNER:
            case MOVE_SUPERCELL_SLAM:
            case MOVE_HEX:
            case MOVE_KNOCK_OFF:
            case MOVE_BOUNCE:
            case MOVE_DRILL_RUN:
            case MOVE_LUNGE:
            case MOVE_ALLURING_VOICE:
            case MOVE_THROAT_CHOP:
            case MOVE_DUAL_WINGBEAT:
            case MOVE_SEED_BOMB:
            case MOVE_DUAL_CHOP:
            case MOVE_IRON_HEAD:
            case MOVE_ZEN_HEADBUTT:
            case MOVE_POWER_GEM:
            case MOVE_BODY_SLAM:
            case MOVE_EXPANDING_FORCE:
            case MOVE_DARKEST_LARIAT:
            case MOVE_LIQUIDATION:
            case MOVE_ICICLE_CRASH:
            case MOVE_PSYCHIC_FANGS:
            case MOVE_BLAZE_KICK:
            case MOVE_PLAY_ROUGH:
            case MOVE_POLLEN_PUFF:
            case MOVE_PHANTOM_FORCE:
            case MOVE_BUG_BUZZ:
            case MOVE_MUDDY_WATER:
            case MOVE_EARTH_POWER:
            case MOVE_AQUA_TAIL:
            case MOVE_FOUL_PLAY:
            case MOVE_HEAT_WAVE:
            case MOVE_HEAVY_SLAM:
            case MOVE_HEAT_CRASH:
                copyvar(VAR_TEMP_0, VAR_RESULT)
                copyvar(VAR_0x8005, VAR_RESULT)
                setvar(VAR_TEMP_1, 1)
                setvar(VAR_TEMP_2, ITEM_BLUE_SHARD)
            case MOVE_HIGH_HORSEPOWER:
            case MOVE_FUTURE_SIGHT:
            case MOVE_SOLAR_BLADE:
            case MOVE_MISTY_EXPLOSION:
            case MOVE_HYDRO_PUMP:
            case MOVE_POLTERGEIST:
            case MOVE_BRAVE_BIRD:
            case MOVE_FLARE_BLITZ:
            case MOVE_CLOSE_COMBAT:
            case MOVE_OUTRAGE:
            case MOVE_MEGAHORN:
            case MOVE_GUNK_SHOT:
            case MOVE_POWER_WHIP:
            case MOVE_SUPERPOWER:
            case MOVE_LEAF_STORM:
            case MOVE_DRACO_METEOR:
            case MOVE_STEEL_BEAM:
            case MOVE_METEOR_BEAM:
            case MOVE_GIGA_IMPACT:
            case MOVE_HYPER_BEAM:
            case MOVE_FOCUS_PUNCH:
                copyvar(VAR_TEMP_0, VAR_RESULT)
                copyvar(VAR_0x8005, VAR_RESULT)
                setvar(VAR_TEMP_1, 1)
                setvar(VAR_TEMP_2, ITEM_YELLOW_SHARD)
            case MOVE_TRICK:
            case MOVE_HEAL_BELL:
            case MOVE_HELPING_HAND:
            case MOVE_SYNTHESIS:
            case MOVE_PAIN_SPLIT:
            case MOVE_GRAVITY:
            case MOVE_PSYCH_UP:
            case MOVE_COACHING:
            case MOVE_CURSE:
            case MOVE_HONE_CLAWS:
            case MOVE_SHELL_SMASH:
            case MOVE_QUIVER_DANCE:
            case MOVE_DRAGON_DANCE:
            case MOVE_STEALTH_ROCK:
            case MOVE_TAILWIND:
            case MOVE_SPIKES:
            case MOVE_TOXIC_SPIKES:
            case MOVE_WORK_UP:
                copyvar(VAR_TEMP_0, VAR_RESULT)
                copyvar(VAR_0x8005, VAR_RESULT)
                setvar(VAR_TEMP_1, 1)
                setvar(VAR_TEMP_2, ITEM_GREEN_SHARD)
			case 0:
			case MULTI_B_PRESSED:
				return
		}
		buffermovename(0, VAR_TEMP_0)
		buffernumberstring(1, VAR_TEMP_1)
		bufferitemnameplural(2, VAR_TEMP_2, VAR_TEMP_1)
		setspeaker("Lelouch")
		msgbox("For {STR_VAR_2} {STR_VAR_3}, you want me to\nteach the move {STR_VAR_1}?", MSGBOX_YESNO)
		if (var(VAR_RESULT) == NO) {
			continue
		}
		if (checkitem(VAR_TEMP_2, VAR_TEMP_1) == FALSE) {
			setspeaker("Lelouch")
			msgbox(format("You don't have enough of that Shard."))
			continue
		}
		setspeaker("Lelouch")
		msgbox("Which Pokémon should learn\n{STR_VAR_1}?")
		special(ChooseMonForMoveTutor)
		waitstate
		lock
		faceplayer
		if (var(VAR_RESULT) == 0) {
			continue
		}
		buffernumberstring(1, VAR_TEMP_1)
		bufferitemnameplural(2, VAR_TEMP_2, VAR_TEMP_1)
		msgbox(gText_Lelouch_PayItem)
		removeitem(VAR_TEMP_2, VAR_TEMP_1)
		return
	}
}

text gText_Lelouch_PayItem {
	format("{PLAYER} handed over {STR_VAR_2} {STR_VAR_3}.")
}

// Each added tutor move needs to be here, even though it's not actually a script. This is because of how make_teachables.py works!
script TutorDummy {
	setvar(VAR_0x8005, MOVE_BREAKING_SWIPE)
	setvar(VAR_0x8005, MOVE_GRASSY_GLIDE)
	setvar(VAR_0x8005, MOVE_LOW_SWEEP)
	setvar(VAR_0x8005, MOVE_STEEL_WING)
	setvar(VAR_0x8005, MOVE_ELECTROWEB)
	setvar(VAR_0x8005, MOVE_ROCK_BLAST)
	setvar(VAR_0x8005, MOVE_PIN_MISSILE)
	setvar(VAR_0x8005, MOVE_ICICLE_SPEAR)
	setvar(VAR_0x8005, MOVE_LOW_KICK)
	setvar(VAR_0x8005, MOVE_AIR_SLASH)
	setvar(VAR_0x8005, MOVE_ICE_SPINNER)
	setvar(VAR_0x8005, MOVE_SUPERCELL_SLAM)
	setvar(VAR_0x8005, MOVE_HIGH_HORSEPOWER)
	setvar(VAR_0x8005, MOVE_FUTURE_SIGHT)
	setvar(VAR_0x8005, MOVE_SOLAR_BLADE)

	setvar(VAR_0x8005, MOVE_HEX)
	setvar(VAR_0x8005, MOVE_KNOCK_OFF)
	setvar(VAR_0x8005, MOVE_BURNING_JEALOUSY)
	setvar(VAR_0x8005, MOVE_BOUNCE)
	setvar(VAR_0x8005, MOVE_SUCKER_PUNCH)
	setvar(VAR_0x8005, MOVE_RISING_VOLTAGE)
	setvar(VAR_0x8005, MOVE_SKITTER_SMACK)
	setvar(VAR_0x8005, MOVE_LASH_OUT)
	setvar(VAR_0x8005, MOVE_TEMPER_FLARE)
	setvar(VAR_0x8005, MOVE_PSYCHIC_NOISE)
	setvar(VAR_0x8005, MOVE_STOMPING_TANTRUM)
	setvar(VAR_0x8005, MOVE_MYSTICAL_FIRE)
	setvar(VAR_0x8005, MOVE_SCALE_SHOT)
	setvar(VAR_0x8005, MOVE_DRILL_RUN)
	setvar(VAR_0x8005, MOVE_LUNGE)
	setvar(VAR_0x8005, MOVE_ALLURING_VOICE)
	setvar(VAR_0x8005, MOVE_THROAT_CHOP)
	setvar(VAR_0x8005, MOVE_DUAL_WINGBEAT)
	setvar(VAR_0x8005, MOVE_SEED_BOMB)
	setvar(VAR_0x8005, MOVE_DUAL_CHOP)
	setvar(VAR_0x8005, MOVE_IRON_HEAD)
	setvar(VAR_0x8005, MOVE_ZEN_HEADBUTT)
	setvar(VAR_0x8005, MOVE_POWER_GEM)
	setvar(VAR_0x8005, MOVE_BODY_SLAM)
	setvar(VAR_0x8005, MOVE_EXPANDING_FORCE)
	setvar(VAR_0x8005, MOVE_DARKEST_LARIAT)
	setvar(VAR_0x8005, MOVE_LIQUIDATION)
	setvar(VAR_0x8005, MOVE_ICICLE_CRASH)
	setvar(VAR_0x8005, MOVE_PSYCHIC_FANGS)

	setvar(VAR_0x8005, MOVE_BLAZE_KICK)
	setvar(VAR_0x8005, MOVE_PLAY_ROUGH)
	setvar(VAR_0x8005, MOVE_POLLEN_PUFF)
	setvar(VAR_0x8005, MOVE_PHANTOM_FORCE)
	setvar(VAR_0x8005, MOVE_BUG_BUZZ)
	setvar(VAR_0x8005, MOVE_MUDDY_WATER)
	setvar(VAR_0x8005, MOVE_EARTH_POWER)
	setvar(VAR_0x8005, MOVE_AQUA_TAIL)
	setvar(VAR_0x8005, MOVE_FOUL_PLAY)
	setvar(VAR_0x8005, MOVE_HEAT_WAVE)
	setvar(VAR_0x8005, MOVE_MISTY_EXPLOSION)
	setvar(VAR_0x8005, MOVE_HEAVY_SLAM)
	setvar(VAR_0x8005, MOVE_HEAT_CRASH)
	setvar(VAR_0x8005, MOVE_HYDRO_PUMP)
	setvar(VAR_0x8005, MOVE_POLTERGEIST)
	setvar(VAR_0x8005, MOVE_BRAVE_BIRD)
	setvar(VAR_0x8005, MOVE_FLARE_BLITZ)
	setvar(VAR_0x8005, MOVE_CLOSE_COMBAT)
	setvar(VAR_0x8005, MOVE_OUTRAGE)
	setvar(VAR_0x8005, MOVE_MEGAHORN)
	setvar(VAR_0x8005, MOVE_GUNK_SHOT)
	setvar(VAR_0x8005, MOVE_POWER_WHIP)
	setvar(VAR_0x8005, MOVE_SUPERPOWER)
	setvar(VAR_0x8005, MOVE_LEAF_STORM)
	setvar(VAR_0x8005, MOVE_DRACO_METEOR)
	setvar(VAR_0x8005, MOVE_STEEL_BEAM)
	setvar(VAR_0x8005, MOVE_METEOR_BEAM)
	setvar(VAR_0x8005, MOVE_GIGA_IMPACT)
	setvar(VAR_0x8005, MOVE_HYPER_BEAM)
	setvar(VAR_0x8005, MOVE_FOCUS_PUNCH)

	setvar(VAR_0x8005, MOVE_TRICK)
	setvar(VAR_0x8005, MOVE_HEAL_BELL)
	setvar(VAR_0x8005, MOVE_HELPING_HAND)
	setvar(VAR_0x8005, MOVE_SYNTHESIS)
	setvar(VAR_0x8005, MOVE_PAIN_SPLIT)
	setvar(VAR_0x8005, MOVE_GRAVITY)
	setvar(VAR_0x8005, MOVE_PSYCH_UP)
	setvar(VAR_0x8005, MOVE_COACHING)
	setvar(VAR_0x8005, MOVE_CURSE)
	setvar(VAR_0x8005, MOVE_HONE_CLAWS)
	setvar(VAR_0x8005, MOVE_SHELL_SMASH)
	setvar(VAR_0x8005, MOVE_QUIVER_DANCE)
	setvar(VAR_0x8005, MOVE_DRAGON_DANCE)
	setvar(VAR_0x8005, MOVE_STEALTH_ROCK)
	setvar(VAR_0x8005, MOVE_TAILWIND)
	setvar(VAR_0x8005, MOVE_SPIKES)
	setvar(VAR_0x8005, MOVE_TOXIC_SPIKES)
	setvar(VAR_0x8005, MOVE_WORK_UP)
}

script EventScript_Shop_Lelouch_Other {
	checkitem(ITEM_GREEN_SHARD, 1)
	if (var(VAR_RESULT) == FALSE) {
		msgbox(gText_Lelouch_NotEnoughColor)
		return
	}
	msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: I offer nature changing services at the cost of one Green Shard.\pFirst, choose a Pokémon."))
	special(ChoosePartyMon)
	waitstate
	if (var(VAR_0x8004) == PARTY_NOTHING_CHOSEN) {
		return
	} else {
		specialvar(VAR_RESULT, ScriptGetPartyMonSpecies)
		if (var(VAR_RESULT) == SPECIES_EGG) {
			msgbox("No eggs!")
		} else {
			specialvar(VAR_TEMP_1, ScriptGetPartyMonSpecies)
			bufferspeciesname(0, VAR_TEMP_1)
			copyvar(VAR_TEMP_1, VAR_0x8004)
			msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: Which nature would you like your {STR_VAR_1} to have?"), MSGBOX_DEFAULT)
			dynmultichoice(0, 0, FALSE, 5, 0, DYN_MULTICHOICE_CB_NONE, "Lonely", "Adamant", "Naughty", "Brave", "Bold", "Impish", "Lax", "Relaxed", "Modest", "Mild", "Rash", "Quiet", "Calm", "Gentle", "Careful", "Sassy", "Timid", "Hasty", "Jolly", "Naive", "Serious")
			switch (var(VAR_RESULT)) {
				case 0:
					setvar(VAR_TEMP_2, 1)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Lonely, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 1:
					setvar(VAR_TEMP_2, 3)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Adamant, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 2:
					setvar(VAR_TEMP_2, 4)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Naughty, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 3:
					setvar(VAR_TEMP_2, 2)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Brave, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 4:
					setvar(VAR_TEMP_2, 5)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Bold, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 5:
					setvar(VAR_TEMP_2, 8)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Impish, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 6:
					setvar(VAR_TEMP_2, 9)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Lax, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 7:
					setvar(VAR_TEMP_2, 7)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Relaxed, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 8:
					setvar(VAR_TEMP_2, 15)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Modest, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 9:
					setvar(VAR_TEMP_2, 16)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Mild, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 10:
					setvar(VAR_TEMP_2, 19)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Rash, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 11:
					setvar(VAR_TEMP_2, 17)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Quiet, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 12:
					setvar(VAR_TEMP_2, 20)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Calm, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 13:
					setvar(VAR_TEMP_2, 21)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Gentle, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 14:
					setvar(VAR_TEMP_2, 23)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Careful, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 15:
					setvar(VAR_TEMP_2, 22)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Sassy, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 16:
					setvar(VAR_TEMP_2, 10)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Timid, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 17:
					setvar(VAR_TEMP_2, 11)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Hasty, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 18:
					setvar(VAR_TEMP_2, 13)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Jolly, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 19:
					setvar(VAR_TEMP_2, 14)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Naive, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case 20:
					setvar(VAR_TEMP_2, 12)
					msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: If you'd like to change your {STR_VAR_1}'s nature to Serious, it will cost one Green Shard."), MSGBOX_YESNO)
					if (var(VAR_RESULT) == NO) {
						return
					}
				case MULTI_B_PRESSED:
					return
			}
			playse(SE_EXP_MAX)
			waitse
			msgbox(format("{COLOR BLUE}Lelouch{COLOR DARK_GRAY}: I've changed your {STR_VAR_1}'s nature to the requested nature."))
			special(SetMonNature)
			msgbox(gText_Lelouch_PayItem)
			removeitem(ITEM_GREEN_SHARD, 1)
		}
	}
	return
}

script EventScript_Twin {
	lock
	faceplayer
	msgbox(format("I love watching Furret walk!"))
	playbgm(MUS_BW_ACCUMULA, FALSE)
	release
}

script EventScript_Furret {
	lock
	faceplayer
	setspeaker("Furret")
	playmoncry(SPECIES_FURRET, CRY_MODE_NORMAL)
	msgbox(format("Furr?"))
	waitmoncry
	release
	end
}

script EventScript_Ponyta {
	lock
	faceplayer
	setspeaker("Ponyta")
	playmoncry(SPECIES_PONYTA, CRY_MODE_NORMAL)
	msgbox(format("Pony! Ponyta!"))
	waitmoncry
	release
	end
}

script EventScript_Tyrogue {
	lock
	faceplayer
	setspeaker("Tyrogue")
	playmoncry(SPECIES_TYROGUE, CRY_MODE_NORMAL)
	msgbox(format("T-Tyrogue!"))
	waitmoncry
	release
	end
}

script EventScript_MeowthAlola {
	lock
	faceplayer
	setspeaker("Meowth")
	playmoncry(SPECIES_MEOWTH_ALOLA, CRY_MODE_NORMAL)
	msgbox(format("Meee-owth!"))
	waitmoncry
	release
	end
}

script EventScript_Marill {
	lock
	faceplayer
	setspeaker("Marill")
	playmoncry(SPECIES_MARILL, CRY_MODE_NORMAL)
	msgbox(format("Mari! Mari!"))
	waitmoncry
	release
	end
}

script EventScript_Magnemite {
	lock
	faceplayer
	setspeaker("Magnemite")
	playmoncry(SPECIES_MAGNEMITE, CRY_MODE_NORMAL)
	msgbox(format("BZZT!"))
	waitmoncry
	release
	end
}

script ZoneSanctuary_EventScript_SchoolKidF {
	lock
	faceplayer
	msgbox(format("Did you know? Honey can be slathered on Honey Trees, or used in the field to attract multiple wild Pokémon at the same time!\pYou can buy Honey at the Farmer's Stand, where my older sister works!"))
	release
}

script EventScript_RangerF {
	lock
	faceplayer
	message(format("Hey there, challenger! Would you like to enable Encounter Overcrowding?"))
	waitmessage
	dynmultichoice(20, 6, FALSE, 3, 0, DYN_MULTICHOICE_CB_NONE, "Info", "Yes", "No", "Exit")
	switch (var(VAR_RESULT)) {
		case 0:
			msgbox(format("By default, for a given save file, the possible wild encounters are randomly chosen from a limited pool.\pFor example, on a map with grass encounters, there are typically 6 species you can actually encounter, chosen randomly when you start your save file out of 12 total species.\pEncounter Overcrowding makes it so all 12 species are encounterable in the wild.\pThis typically causes routes to feel overcrowded, hence it is disabled by default.\pIf you'd like to use a specific Pokémon species, it is recommended to enable Encounter Overcrowding."))
		case 1:
			msgbox(format("Are you sure you want to enable Encounter Overcrowding?"), MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				setflag(FLAG_SYS_ALL_WILD_MONS)
				msgbox(format("Encounter Overcrowding enabled."))
				return
			}
		case 2:
			msgbox(format("Are you sure you want to disable Encounter Overcrowding?"), MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				clearflag(FLAG_SYS_ALL_WILD_MONS)
				msgbox(format("Encounter Overcrowding disabled."))
				return
			}
	}
	msgbox(format("Come on back if you change your mind!"))
	release
}
